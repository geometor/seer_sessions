

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>seer_sessions.textual-arc2 &mdash; Project name not set  documentation</title>
  <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=ea5fcf70" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/styles.css?v=85f2e26d" />
  <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
</head>
<body>
  <header>
    <div class="logo">
      <a href="../../index.html">
        <h1>Project name not set</h1>
      </a>
      <div class="org-repo">
        <span class="org">geometor</span>
        •
        <span class="repo">seer_sessions</span>
      </div>
    </div>
    <nav aria-label="Header">
      <input type="checkbox" id="nav-Header-toggle" >
      <label for="nav-Header-toggle" >Header</label>
      <ul>
      </ul>
    </nav>
    <div class="motto"></div>
  </header>
  <main>

    <article>
      <nav class="context">
        <div class="prev">
        </div>
        <div class="next">
        </div>
      </nav>
      <nav class="breadcrumbs">
        <span><a href="../../index.html">Home</a></span>
          <span>/</span>
        <span><a href="../index.html">Module code</a></span>
          <span>/</span>
        <span><a href="../seer_sessions.html">seer_sessions</a></span>
        <span>/</span>
        <span>seer_sessions.textual-arc2</span>
      </nav>
      <div class="content">
          <h1>Source code for seer_sessions.textual-arc2</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Filename: textual_arc_grid_with_lines.py</span>
<span class="sd">Description: A Textual app that displays ARC-style colored grids with grid lines separating the cells.</span>
<span class="sd">It demonstrates several rendering methods (image-based, Unicode block, and half-block) with grid lines.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">textual.app</span><span class="w"> </span><span class="kn">import</span> <span class="n">App</span><span class="p">,</span> <span class="n">ComposeResult</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">textual.containers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Horizontal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">textual.widgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">Static</span><span class="p">,</span> <span class="n">Button</span>

<span class="c1"># Global constants for grid lines in text modes and image mode.</span>
<div class="viewcode-block" id="GRID_LINE_COLOR">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.GRID_LINE_COLOR">[docs]</a>
<span class="n">GRID_LINE_COLOR</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span></div>

<div class="viewcode-block" id="GRID_LINE_WIDTH">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.GRID_LINE_WIDTH">[docs]</a>
<span class="n">GRID_LINE_WIDTH</span> <span class="o">=</span> <span class="p">(</span>
    <span class="mi">1</span>  <span class="c1"># For text modes: in number of characters; for image mode: in pixels.</span>
<span class="p">)</span></div>


<span class="c1"># Define a color palette mapping for grid values (0-9) to colors.</span>
<div class="viewcode-block" id="COLOR_PALETTE">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.COLOR_PALETTE">[docs]</a>
<span class="n">COLOR_PALETTE</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s2">&quot;yellow&quot;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span> <span class="s2">&quot;magenta&quot;</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">:</span> <span class="s2">&quot;cyan&quot;</span><span class="p">,</span>
    <span class="mi">7</span><span class="p">:</span> <span class="s2">&quot;gold&quot;</span><span class="p">,</span>
    <span class="mi">8</span><span class="p">:</span> <span class="s2">&quot;#ff8800&quot;</span><span class="p">,</span>  <span class="c1"># orange</span>
    <span class="mi">9</span><span class="p">:</span> <span class="s2">&quot;#00ffff&quot;</span><span class="p">,</span>  <span class="c1"># cyan variant</span>
<span class="p">}</span></div>


<span class="c1"># Example ARC-style grid data (each number corresponds to a color in COLOR_PALETTE)</span>
<div class="viewcode-block" id="GRID_DATA">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.GRID_DATA">[docs]</a>
<span class="n">GRID_DATA</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="p">]</span></div>



<div class="viewcode-block" id="BaseGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BaseGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BaseGrid</span><span class="p">(</span><span class="n">Static</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base widget class for rendering the colored grid.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<div class="viewcode-block" id="BaseGrid.grid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BaseGrid.grid">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span></div>

<div class="viewcode-block" id="BaseGrid.rows">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BaseGrid.rows">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseGrid.cols">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BaseGrid.cols">[docs]</a>
        <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span></div>
</div>



<div class="viewcode-block" id="ImageGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ImageGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ImageGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grid rendered using an image-based approach via rich-pixels.</span>
<span class="sd">    This mode creates a PIL image with grid lines separating the cells.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ImageGrid.on_mount">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ImageGrid.on_mount">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_mount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">rich_pixels</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pixels</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="s2">&quot;Image rendering requires &#39;Pillow&#39; and &#39;rich-pixels&#39; libraries.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Determine cell pixel size (without grid lines)</span>
        <span class="n">cell_pixel_size</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">lw</span> <span class="o">=</span> <span class="n">GRID_LINE_WIDTH</span>
        <span class="c1"># Compute total image size including grid lines between cells and around edges.</span>
        <span class="n">img_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">*</span> <span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">lw</span>
        <span class="n">img_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">*</span> <span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">lw</span>

        <span class="c1"># Create a new image and fill it with the grid line color.</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">),</span> <span class="n">GRID_LINE_COLOR</span><span class="p">)</span>
        <span class="c1"># Fill each cell: calculate its top-left offset including the grid line offset.</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">],</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
                <span class="c1"># Convert color to an RGB tuple.</span>
                <span class="n">rgb_color</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                <span class="n">x0</span> <span class="o">=</span> <span class="n">lw</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="p">(</span><span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="n">lw</span><span class="p">)</span>
                <span class="n">y0</span> <span class="o">=</span> <span class="n">lw</span> <span class="o">+</span> <span class="n">r</span> <span class="o">*</span> <span class="p">(</span><span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="n">lw</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">cell_pixel_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">cell_pixel_size</span><span class="p">):</span>
                        <span class="n">image</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">rgb_color</span><span class="p">)</span>
        <span class="n">pixels</span> <span class="o">=</span> <span class="n">Pixels</span><span class="o">.</span><span class="n">from_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span></div>


<div class="viewcode-block" id="ImageGrid.on_resize">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ImageGrid.on_resize">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_resize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Regenerate the image on resize so that cell sizes scale with available space.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">rich_pixels</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pixels</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">lw</span> <span class="o">=</span> <span class="n">GRID_LINE_WIDTH</span>
        <span class="n">new_width</span><span class="p">,</span> <span class="n">new_height</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span>  <span class="c1"># in terminal cells (approximation)</span>
        <span class="c1"># Determine available cell size (simple heuristic)</span>
        <span class="n">factor_x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">new_width</span> <span class="o">//</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">factor_y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">new_height</span> <span class="o">//</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">cell_pixel_size</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">min</span><span class="p">(</span><span class="n">factor_x</span><span class="p">,</span> <span class="n">factor_y</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="p">)</span>  <span class="c1"># scale factor; adjust multiplier for detail</span>

        <span class="n">img_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">*</span> <span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">lw</span>
        <span class="n">img_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">*</span> <span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">lw</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">),</span> <span class="n">GRID_LINE_COLOR</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">],</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
                <span class="n">rgb_color</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                <span class="n">x0</span> <span class="o">=</span> <span class="n">lw</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="p">(</span><span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="n">lw</span><span class="p">)</span>
                <span class="n">y0</span> <span class="o">=</span> <span class="n">lw</span> <span class="o">+</span> <span class="n">r</span> <span class="o">*</span> <span class="p">(</span><span class="n">cell_pixel_size</span> <span class="o">+</span> <span class="n">lw</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">cell_pixel_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">cell_pixel_size</span><span class="p">):</span>
                        <span class="n">image</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">rgb_color</span><span class="p">)</span>
        <span class="n">pixels</span> <span class="o">=</span> <span class="n">Pixels</span><span class="o">.</span><span class="n">from_image</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="UnicodeBlockGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.UnicodeBlockGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">UnicodeBlockGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grid rendered using colored Unicode blocks.</span>
<span class="sd">    This version inserts extra spaces with background styling to simulate grid lines.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="UnicodeBlockGrid.render">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.UnicodeBlockGrid.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">rich.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">Text</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
        <span class="n">cell_width</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># characters per cell (adjust for squareness)</span>
        <span class="n">lw</span> <span class="o">=</span> <span class="n">GRID_LINE_WIDTH</span>

        <span class="c1"># Helper function to create a horizontal grid line.</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">horizontal_line</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
            <span class="c1"># For each column, add a vertical grid separator and cell space.</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">:</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="c1"># Append top horizontal grid line.</span>
        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">horizontal_line</span><span class="p">())</span>
        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Build each grid row.</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="n">cell_line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                <span class="c1"># Vertical separator before the cell.</span>
                <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="c1"># Final vertical separator.</span>
            <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell_line</span><span class="p">)</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># Append horizontal grid line after the row.</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">horizontal_line</span><span class="p">())</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span></div>
</div>



<div class="viewcode-block" id="SplitBlockGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.SplitBlockGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SplitBlockGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    New Unicode rendering mode.</span>

<span class="sd">    For each grid cell, render:</span>
<span class="sd">      • A full block (&quot;█&quot;) with the cell&#39;s fill color.</span>
<span class="sd">      • A vertical split block (&quot;▌&quot;) styled with foreground = fill color and background = grid line color.</span>

<span class="sd">    This results in two characters per cell that show the cell color and a vertical separator.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SplitBlockGrid.render">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.SplitBlockGrid.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">rich.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">Text</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
        <span class="c1"># For each row in the grid</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="c1"># For each cell, output two characters</span>
            <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                <span class="n">fill_color</span> <span class="o">=</span> <span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
                <span class="c1"># First character: full block in fill color.</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;█&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
                <span class="c1"># Second character: left half block, so its left half is fg and right half is bg.</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;▌&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fill_color</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span></div>
</div>



<div class="viewcode-block" id="BoxDrawingGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BoxDrawingGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BoxDrawingGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A grid rendered with box-drawing characters to show horizontal and vertical lines clearly.</span>
<span class="sd">    Each cell is rendered as a box of text with a colored background.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BoxDrawingGrid.render">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.BoxDrawingGrid.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">rich.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">Text</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>

        <span class="c1"># Number of text characters for each cell&#39;s width/height.</span>
        <span class="n">cell_width</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">cell_height</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1"># Define a few helper functions to build the horizontal lines (top, middle, bottom).</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">top_line</span><span class="p">():</span>
            <span class="c1"># Example for cols=3: &quot;┌───┬───┬───┐&quot;</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;┌&quot;</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┬&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┐&quot;</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">mid_line</span><span class="p">():</span>
            <span class="c1"># Example: &quot;├───┼───┼───┤&quot;</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;├&quot;</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┼&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┤&quot;</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">bot_line</span><span class="p">():</span>
            <span class="c1"># Example: &quot;└───┴───┴───┘&quot;</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;└&quot;</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┴&quot;</span>
            <span class="n">line</span> <span class="o">+=</span> <span class="s2">&quot;─&quot;</span> <span class="o">*</span> <span class="n">cell_width</span> <span class="o">+</span> <span class="s2">&quot;┘&quot;</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="c1"># Build the top border line.</span>
        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">top_line</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">GRID_LINE_COLOR</span><span class="p">)</span>
        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Render each row of cells.</span>
        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">):</span>
            <span class="c1"># Each row of cells has &#39;cell_height&#39; lines of text for the interior.</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cell_height</span><span class="p">):</span>
                <span class="n">row_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
                <span class="c1"># Start with left border.</span>
                <span class="n">row_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;│&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">GRID_LINE_COLOR</span><span class="p">)</span>

                <span class="c1"># For each column/cell in this row:</span>
                <span class="k">for</span> <span class="n">col_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                    <span class="n">fill_color</span> <span class="o">=</span> <span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">row_index</span><span class="p">][</span><span class="n">col_index</span><span class="p">],</span> <span class="s2">&quot;black&quot;</span>
                    <span class="p">)</span>
                    <span class="c1"># Append &#39;cell_width&#39; spaces styled with the cell&#39;s fill color.</span>
                    <span class="n">row_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">fill_color</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="c1"># Append the right vertical line.</span>
                    <span class="n">row_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;│&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">GRID_LINE_COLOR</span><span class="p">)</span>

                <span class="c1"># Add this row of text (one interior line of the box) plus a newline.</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row_text</span><span class="p">)</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="c1"># After finishing the interior of row_index:</span>
            <span class="c1"># If it&#39;s not the last row, print the &#39;middle&#39; line; otherwise, the bottom line.</span>
            <span class="k">if</span> <span class="n">row_index</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mid_line</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">GRID_LINE_COLOR</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bot_line</span><span class="p">(),</span> <span class="n">style</span><span class="o">=</span><span class="n">GRID_LINE_COLOR</span><span class="p">)</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">text</span></div>
</div>



<div class="viewcode-block" id="SquareCharGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.SquareCharGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SquareCharGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders each grid cell as a single Unicode square character (default: &#39;■&#39;),</span>
<span class="sd">    styled with the cell&#39;s fill color.</span>

<span class="sd">    You can switch the character to something else (e.g. &#39;⬛&#39;, &#39;◼&#39;, &#39;▣&#39;) if desired.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SquareCharGrid.SQUARE_CHAR">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.SquareCharGrid.SQUARE_CHAR">[docs]</a>
    <span class="n">SQUARE_CHAR</span> <span class="o">=</span> <span class="s2">&quot;■&quot;</span> <span class="c1"># &amp;#11200; black square centred</span></div>

    <span class="n">SQUARE_CHAR</span> <span class="o">=</span> <span class="s2">&quot;■&quot;</span> <span class="c1"># &amp;#9632; black square</span>
    <span class="n">SQUARE_CHAR</span> <span class="o">=</span> <span class="s2">&quot;▀ &quot;</span> <span class="c1"># &amp;#9632; black square</span>

    <span class="c1"># ◼&quot;  # Change this to another square if you like.</span>

<div class="viewcode-block" id="SquareCharGrid.render">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.SquareCharGrid.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">rich.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">Text</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>

        <span class="c1"># Loop over each row in the grid</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
            <span class="c1"># For each cell, append the chosen square character, styled in the cell&#39;s color</span>
            <span class="k">for</span> <span class="n">cell_value</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                <span class="n">fill_color</span> <span class="o">=</span> <span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cell_value</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
                <span class="c1"># Append the square character with the fill color</span>
                <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SQUARE_CHAR</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">fill_color</span><span class="p">)</span>
            <span class="c1"># Add a newline after finishing a row</span>
            <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span></div>
</div>



<div class="viewcode-block" id="HalfBlockGrid">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.HalfBlockGrid">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">HalfBlockGrid</span><span class="p">(</span><span class="n">BaseGrid</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grid rendered using half-block characters (▀) to combine two rows.</span>
<span class="sd">    This version also adds grid lines.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="HalfBlockGrid.render">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.HalfBlockGrid.render">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">rich.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">Text</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
        <span class="n">cell_width</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># number of characters for each cell horizontally</span>
        <span class="n">lw</span> <span class="o">=</span> <span class="n">GRID_LINE_WIDTH</span>

        <span class="c1"># Helper for horizontal grid line.</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">horizontal_line</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">:</span>
                    <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">line</span>

        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">horizontal_line</span><span class="p">())</span>
        <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">top_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
                <span class="n">bottom_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">r</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">cell_line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                    <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="s2">&quot;▀&quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span>
                        <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">top_row</span><span class="p">[</span><span class="n">c</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">bottom_row</span><span class="p">[</span><span class="n">c</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell_line</span><span class="p">)</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">+=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># For an odd number of rows, render the last row with full blocks.</span>
                <span class="n">last_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
                <span class="n">cell_line</span> <span class="o">=</span> <span class="n">Text</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cols</span><span class="p">):</span>
                    <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="s2">&quot;▀&quot;</span> <span class="o">*</span> <span class="n">cell_width</span><span class="p">,</span>
                        <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">last_row</span><span class="p">[</span><span class="n">c</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">COLOR_PALETTE</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">last_row</span><span class="p">[</span><span class="n">c</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="n">cell_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">lw</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;on </span><span class="si">{</span><span class="n">GRID_LINE_COLOR</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell_line</span><span class="p">)</span>
                <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">r</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">horizontal_line</span><span class="p">())</span>
            <span class="n">text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span></div>
</div>



<div class="viewcode-block" id="ARCGridApp">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ARCGridApp">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ARCGridApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>
<div class="viewcode-block" id="ARCGridApp.CSS">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ARCGridApp.CSS">[docs]</a>
    <span class="n">CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Screen {</span>
<span class="s2">        align: center middle;</span>
<span class="s2">    }</span>
<span class="s2">    &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="ARCGridApp.compose">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ARCGridApp.compose">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">compose</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ComposeResult</span><span class="p">:</span>
        <span class="n">button_bar</span> <span class="o">=</span> <span class="n">Horizontal</span><span class="p">(</span>
            <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Image&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mode_image&quot;</span><span class="p">),</span>
            <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Unicode&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mode_unicode&quot;</span><span class="p">),</span>
            <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Split Grid&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mode_split&quot;</span><span class="p">),</span>
            <span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Squares&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mode_box&quot;</span><span class="p">),</span>  
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;button_bar&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_grid</span> <span class="o">=</span> <span class="n">ImageGrid</span><span class="p">(</span><span class="n">GRID_DATA</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;image_grid&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicode_grid</span> <span class="o">=</span> <span class="n">UnicodeBlockGrid</span><span class="p">(</span><span class="n">GRID_DATA</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;unicode_grid&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">split_grid</span> <span class="o">=</span> <span class="n">SplitBlockGrid</span><span class="p">(</span><span class="n">GRID_DATA</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;split_grid&quot;</span><span class="p">)</span>

        <span class="c1"># Instantiate our new BoxDrawingGrid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_grid</span> <span class="o">=</span> <span class="n">SquareCharGrid</span><span class="p">(</span><span class="n">GRID_DATA</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;box_grid&quot;</span><span class="p">)</span>

        <span class="c1"># Hide them by default (or show one by default)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicode_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">split_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

        <span class="k">yield</span> <span class="n">button_bar</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_grid</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicode_grid</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_grid</span>
        <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">box_grid</span></div>


<div class="viewcode-block" id="ARCGridApp.on_button_pressed">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.ARCGridApp.on_button_pressed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_button_pressed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Button</span><span class="o">.</span><span class="n">Pressed</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Switch the active rendering mode based on button presses.&quot;&quot;&quot;</span>
        <span class="c1"># Hide all modes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicode_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">split_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">box_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>

        <span class="c1"># Show whichever was pressed</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;mode_image&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;mode_unicode&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unicode_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;mode_split&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">split_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="s2">&quot;mode_box&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">box_grid</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="s2">&quot;block&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>
</div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<div class="viewcode-block" id="app">
<a class="viewcode-back" href="../../modules/api/seer_sessions/textual-arc2/index.html#seer_sessions.textual-arc2.app">[docs]</a>
    <span class="n">app</span> <span class="o">=</span> <span class="n">ARCGridApp</span><span class="p">()</span></div>

    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
      </div>
      <footer></footer>
    </article>

  </main>

<div class="asides">
    <aside>
        <h3>Search</h3>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
    </aside>
    
</div>
<footer>
    <hr/>
    <div role="contentinfo">
        <p>
                &copy; Copyright .
        </p>
    </div>
</footer>

  <script src="../../_static/jquery.js?v=5d32c60e"></script>
  <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
  <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
  <script src="../../_static/doctools.js?v=9bcbadda"></script>
  <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>


</body>
</html>