task_type: reflection
description: Reflect non-background pixels from the left side across a vertical axis of symmetry onto the right side, preserving existing non-background pixels on the right.
objects:
  - type: grid
    properties:
      - contains pixels of different colors (0-9)
      - background color is white (0)
  - type: separator
    properties:
      - one or more vertical columns composed entirely of the background color (white, 0)
      - defines a vertical axis of symmetry
      - can be multiple columns wide
  - type: pattern/shape
    properties:
      - contiguous areas of non-background pixels
      - located on the left side of the separator
      - located on the right side of the separator (in input and/or output)
axis_of_symmetry:
  - type: vertical line
  - calculation: average of the indices of the first and last central separator columns (columns not at the grid edge, unless the grid is only 3 wide with the middle as separator)
transformation:
  - action: identify_separator
    input: input grid
    output: list of column indices containing only white (0) pixels
  - action: calculate_axis
    input: list of separator column indices
    output: vertical axis coordinate (float)
  - action: copy_input
    input: input grid
    output: initial output grid (identical to input)
  - action: reflect_left_pixels
    input: input grid, output grid, axis coordinate
    description: |
      Iterate through each pixel (r, c) in the input grid *to the left* of the first separator column.
      If the pixel's color is not white (0):
        Calculate the reflected column index c_reflected = round(2 * axis - c).
        If c_reflected is within the grid bounds and to the right of the last separator column:
          Update the pixel at (r, c_reflected) in the *output grid* with the color from the input pixel (r, c).
    output: modified output grid