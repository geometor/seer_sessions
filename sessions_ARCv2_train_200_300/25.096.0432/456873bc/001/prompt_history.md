
## train_1

**input:**
```
0 0 0 0 0 0 2 2 2 0 0 2 2 2 0 0 2 2 2
0 0 0 0 0 0 2 0 0 0 0 2 0 0 0 0 2 0 0
0 0 0 0 0 2 2 2 0 0 2 2 2 0 0 2 2 2 0
0 0 0 0 0 2 2 0 0 0 2 2 0 0 0 2 2 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 0 0 2 2 2 0 0 2 2 2 0 0 0 0 0
0 2 0 0 0 0 2 0 0 0 0 2 0 0 0 0 0 0 0
2 2 2 0 0 2 2 2 0 0 2 2 2 0 0 0 0 0 0
2 2 0 0 0 2 2 0 0 0 2 2 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0
0 2 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0 0
2 2 0 0 0 2 2 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 8 2 2 0 0 2 8 2 0 0 2 2 8
0 0 0 0 0 0 2 0 0 0 0 2 0 0 0 0 2 0 0
0 0 0 0 0 2 2 2 0 0 2 2 2 0 0 2 2 2 0
0 0 0 0 0 2 2 0 0 0 2 2 0 0 0 2 2 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 2 2 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 0 0 2 2 2 0 0 2 2 2 0 0 0 0 0
0 2 0 0 0 0 2 0 0 0 0 2 0 0 0 0 0 0 0
8 2 2 0 0 2 8 2 0 0 2 2 8 0 0 0 0 0 0
2 2 0 0 0 2 2 0 0 0 2 2 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0
0 2 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 0 0 2 2 2 0 0 0 0 0 0 0 0 0 0 0
8 2 0 0 0 2 8 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
2 2 0 0 2 2 0 0 3 3 3
2 0 2 0 2 0 2 0 3 3 3
0 2 0 0 0 2 0 0 3 3 3
0 0 0 0 0 0 0 0 3 3 3
2 2 0 0 0 0 0 0 3 3 3
2 0 2 0 0 0 0 0 3 3 3
0 2 0 0 0 0 0 0 3 3 3
0 0 0 0 0 0 0 0 3 3 3
0 0 0 0 2 2 0 0 3 3 3
0 0 0 0 2 0 2 0 3 3 3
0 0 0 0 0 2 0 0 3 3 3
```


**output:**
```
8 2 0 0 2 8 0 0 0 0 0
2 0 2 0 2 0 2 0 0 0 0
0 2 0 0 0 2 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
2 2 0 0 0 0 0 0 2 2 0
8 0 2 0 0 0 0 0 2 0 8
0 2 0 0 0 0 0 0 0 2 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 2 2 0 0 0 0 0
0 0 0 0 2 0 2 0 0 0 0
0 0 0 0 0 8 0 0 0 0 0
```


## train_3

**input:**
```
2 0 2 0 0 0 0 0 3 3 3
0 2 0 0 0 0 0 0 3 3 3
2 2 0 0 0 0 0 0 3 3 3
0 0 0 0 0 0 0 0 3 3 3
0 0 0 0 2 0 2 0 3 3 3
0 0 0 0 0 2 0 0 3 3 3
0 0 0 0 2 2 0 0 3 3 3
0 0 0 0 0 0 0 0 3 3 3
2 0 2 0 2 0 2 0 3 3 3
0 2 0 0 0 2 0 0 3 3 3
2 2 0 0 2 2 0 0 3 3 3
```


**output:**
```
8 0 2 0 0 0 0 0 2 0 8
0 2 0 0 0 0 0 0 0 2 0
2 2 0 0 0 0 0 0 2 2 0
0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 2 0 2 0 0 0 0
0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 2 2 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0
2 0 2 0 2 0 2 0 0 0 0
0 2 0 0 0 2 0 0 0 0 0
8 2 0 0 2 8 0 0 0 0 0
```

**Perception of the Elements:**

1.  **Input/Output Format:** Both input and output are 2D grids of integers.
2.  **Colors:** The grids use integers 0, 2, 3, and 8, likely representing different colors or states.
    *   `0` appears to be a background color.
    *   `2` forms specific patterns or shapes within the grid.
    *   `3` appears as a solid rectangular block in the input. This block is completely absent in the output.
    *   `8` appears only in the output, replacing some instances of `2`.
3.  **Key Transformation Areas:**
    *   **The '3' Block:** A contiguous rectangular block of color `3` exists in each input. This area undergoes a complete transformation in the output, being replaced by patterns derived from elsewhere in the grid.
    *   **The '2' Patterns:** Shapes made of color `2` exist outside the '3' block. These patterns seem to be the source material for the transformation.
4.  **Core Transformation Logic:**
    *   **Copy/Mirror Operation:** The pattern found in a region adjacent (either below or to the left) to the '3' block in the input seems to be copied or mirrored onto the area occupied by the '3' block in the output.
    *   **Color Change Rule:** Some `2`s in the original patterns and the newly copied patterns are changed to `8`s in the output. This change appears to happen at specific locations within the '2' patterns, specifically at corners.

**Facts (YAML):**


```yaml
Objects:
  - Grid:
      Properties:
        - dimensions (rows, columns)
        - cells
  - Cell:
      Properties:
        - position (row, column)
        - color (0, 2, 3 in input; 0, 2, 8 in output)
  - Color 3 Block:
      Properties:
        - rectangular shape
        - contiguous
        - composed solely of color 3
        - location and dimensions
        - orientation (horizontal or vertical block spanning grid width/height)
      Relationships:
        - exists only in the input grid
        - replaced in the output grid
  - Source Pattern Block:
      Properties:
        - rectangular shape
        - same width/height as the Color 3 Block along the shared dimension
        - contains patterns primarily of color 2 and 0
      Relationships:
        - located adjacent (immediately below or left) to the Color 3 Block in the input grid (potentially separated by a single row/column of 0s)
        - its pattern is used to generate the output in the Color 3 Block's original area
  - Corner '2' Cells:
      Properties:
        - color is 2
      Relationships:
        - has exactly two neighboring cells (N, S, E, W) with color 2
        - these two neighbors are adjacent to each other (e.g., North and East neighbors are 2, others are not)

Actions:
  - Identify: Locate the boundaries and orientation of the Color 3 Block.
  - Identify: Locate the Source Pattern Block based on adjacency (below for horizontal '3' block, left for vertical '3' block) and matching dimension.
  - Copy: Replicate the pattern (colors 0 and 2) from the Source Pattern Block onto the region originally occupied by the Color 3 Block in the output grid.
  - Modify: Iterate through all cells in the (intermediate) output grid.
  - Conditional Change: If a cell has color 2 and satisfies the Corner '2' condition (exactly two adjacent neighbors are also color 2), change its color to 8.
  - Preserve: All other cell colors (0s, and 2s not meeting the corner condition) remain unchanged.

```


**Natural Language Program:**

1.  Initialize the output grid as a copy of the input grid.
2.  Identify the contiguous rectangular block composed entirely of the color `3`. Note its boundaries (start row, end row, start column, end column) and orientation (is it wider, suggesting a horizontal block, or taller, suggesting a vertical block?).
3.  **Determine the Source Pattern Block:**
    *   If the '3' block is horizontal (spans most of the width), identify the block of the *same width* located immediately *below* it in the input grid (potentially skipping one fully zero row if present). This is the Source Pattern Block.
    *   If the '3' block is vertical (spans most of the height), identify the block of the *same height* located immediately *to the left* of it in the input grid (potentially skipping one fully zero column if present). This is the Source Pattern Block.
4.  **Copy the Source Pattern:** Replace the colors in the region of the output grid corresponding to the original '3' block with the colors from the identified Source Pattern Block. Maintain the relative positioning.
5.  **Apply Corner Transformation:** Create a final grid based on the grid modified in step 4. Iterate through each cell `(r, c)` of the modified grid.
6.  For each cell `(r, c)`:
    *   Get the color `C` of the cell `(r, c)`.
    *   If `C` is `2`:
        *   Check its four cardinal neighbors (North, South, East, West), respecting grid boundaries.
        *   Count how many neighbors have the color `2`.
        *   Determine if exactly two neighbors have color `2` AND if those two neighbors are adjacent (N and E, N and W, S and E, S and W).
        *   If both conditions are true, set the color of cell `(r, c)` in the final grid to `8`.
        *   Otherwise (if `C` is `2` but doesn't meet the corner conditions), set the color of cell `(r, c)` in the final grid to `2`.
    *   If `C` is not `2` (i.e., it's `0`), set the color of cell `(r, c)` in the final grid to `C` (`0`).
7.  The resulting final grid is the task's output.
