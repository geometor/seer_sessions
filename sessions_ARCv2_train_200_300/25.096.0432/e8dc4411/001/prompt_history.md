
## train_1

**input:**
```
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 0 1 1 1 1 1 1 1 1
1 1 1 1 1 0 0 0 1 1 1 1 1 1 1
1 1 1 1 3 1 0 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
```


**output:**
```
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
1 1 1 1 1 1 0 1 1 1 1 1 1 1 1
1 1 1 1 1 0 0 0 1 1 1 1 1 1 1
1 1 1 1 3 1 0 1 1 1 1 1 1 1 1
1 1 1 3 3 3 1 1 1 1 1 1 1 1 1
1 1 3 1 3 1 1 1 1 1 1 1 1 1 1
1 3 3 3 1 1 1 1 1 1 1 1 1 1 1
3 1 3 1 1 1 1 1 1 1 1 1 1 1 1
3 3 1 1 1 1 1 1 1 1 1 1 1 1 1
```


## train_2

**input:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 0 8 8 8 8 8 8 8 8 8
8 8 8 0 8 0 8 8 8 8 8 8 8 8
8 8 8 8 0 8 2 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
```


**output:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 0 8 8 8 8 8 8 8 8 8
8 8 8 0 8 0 8 8 8 8 8 8 8 8
8 8 8 8 0 8 2 8 8 8 8 8 8 8
8 8 8 8 8 2 8 2 8 8 8 8 8 8
8 8 8 8 8 8 2 8 2 8 8 8 8 8
8 8 8 8 8 8 8 2 8 2 8 8 8 8
8 8 8 8 8 8 8 8 2 8 2 8 8 8
8 8 8 8 8 8 8 8 8 2 8 2 8 8
8 8 8 8 8 8 8 8 8 8 2 8 2 8
```


## train_3

**input:**
```
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 8 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 4 4 0 4 4 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
```


**output:**
```
4 4 4 4 4 4 4 4 4 4 4 8 8 4 8 8
4 4 4 4 4 4 4 4 4 4 4 8 8 4 8 8
4 4 4 4 4 4 4 4 4 4 4 4 4 8 4 4
4 4 4 4 4 4 4 4 4 4 4 8 8 4 8 8
4 4 4 4 4 4 4 4 4 4 4 8 8 4 8 8
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 4 4 0 4 4 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 0 0 4 0 0 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4
```

Okay, let's analyze the provided examples.

**Perception of Task Elements:**

The task involves transforming an input grid of numbers into an output grid. The transformation appears to depend on the presence of specific numbers (2, 3, 8) within the grid, which act as "sources". These source numbers "propagate" or "paint" diagonally across the grid, changing cells that match the grid's "background" color. The background color is the predominant color in the input grid (1 in train_1, 8 in train_2, 4 in train_3). Other numbers (like 0) seem unaffected and might act as obstacles or simply remain unchanged. The original source numbers also remain in their initial positions. The direction of propagation depends on the source number.

**YAML Facts:**


```yaml
task_type: grid_transformation
grid_properties:
  dimensionality: 2
  cell_content: integers
  background_color: 
    description: The most frequent color in the input grid, excluding 0 perhaps. Specific value varies per example (1, 8, 4).
    role: Acts as the medium/target for propagation.
objects:
  - object_type: source_cell
    identifier: color_value
    properties:
      - color: 2
        action: propagates diagonally down-right
      - color: 3
        action: propagates diagonally down-left
      - color: 8
        action: propagates diagonally up-left AND up-right
    role: Initiates the propagation/painting process.
  - object_type: background_cell
    identifier: color_value (matches grid's background_color)
    role: Can be overwritten by propagation from a source_cell.
  - object_type: inert_cell
    identifier: color_value (e.g., 0)
    role: Not directly involved in propagation; remains unchanged and does not get overwritten.
actions:
  - action_type: propagate_and_paint
    actor: source_cell
    target: background_cell
    constraints:
      - stops_at_grid_boundary
      - follows_specific_diagonal_path (determined by source_cell color)
      - overwrites_only_background_cells_in_path
    result: Target cells change color to match the source cell's color.
relationship:
  - The output grid is a modified version of the input grid.
  - The modification rule depends on the specific color value of identified source cells.
  - Propagation paths extend from each source cell until the grid boundary.
  - Cells retain their input value unless overwritten by a propagation path (and only if they originally contained the background color).
```


**Natural Language Program:**

1.  **Initialization**: Create the output grid as an identical copy of the input grid. Determine the background color by finding the most frequent color in the input grid.
2.  **Identify Sources**: Iterate through each cell `(r, c)` of the input grid.
3.  **Process Source '2'**: If the input cell `(r, c)` contains the color 2:
    *   Trace a path diagonally down and right starting from the cell below and to the right `(r+1, c+1)`.
    *   For each cell `(i, j)` along this path, continue as long as `i` and `j` are within the grid boundaries:
        *   If the input cell `(i, j)` contains the background color, update the output cell `(i, j)` to color 2.
4.  **Process Source '3'**: If the input cell `(r, c)` contains the color 3:
    *   Trace a path diagonally down and left starting from the cell below and to the left `(r+1, c-1)`.
    *   For each cell `(i, j)` along this path, continue as long as `i` and `j` are within the grid boundaries:
        *   If the input cell `(i, j)` contains the background color, update the output cell `(i, j)` to color 3.
5.  **Process Source '8'**: If the input cell `(r, c)` contains the color 8:
    *   **Path 1 (Up-Left)**: Trace a path diagonally up and left starting from `(r-1, c-1)`. For each cell `(i, j)` along this path within grid boundaries, if input cell `(i, j)` is the background color, update output cell `(i, j)` to 8.
    *   **Path 2 (Up-Right)**: Trace a path diagonally up and right starting from `(r-1, c+1)`. For each cell `(i, j)` along this path within grid boundaries, if input cell `(i, j)` is the background color, update output cell `(i, j)` to 8.
6.  **Finalization**: After checking all cells in the input grid, return the modified output grid. Cells not identified as sources and not overwritten during propagation retain their original input values.
