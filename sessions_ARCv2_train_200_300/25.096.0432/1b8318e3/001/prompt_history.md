
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 3 0 0 5 5 0 0 0
0 0 0 0 0 0 0 0 0 0 5 5 0 0 0
0 0 0 5 5 0 2 0 0 0 0 0 0 0 0
0 0 0 5 5 0 0 0 0 0 0 9 0 0 0
0 0 0 0 0 0 0 0 0 0 0 2 0 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 6 0 5 5 0 0 0
0 0 5 5 0 0 0 0 0 0 5 5 0 0 0
0 0 5 5 0 0 2 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 0 0 0 7 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 5 5 0 0 0
0 0 0 1 0 0 0 0 0 0 5 5 0 0 0
0 0 0 5 5 2 0 0 0 0 0 9 1 0 0
0 0 0 5 5 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 2 3 0 0
0 0 2 0 0 0 0 0 0 6 5 5 0 0 0
0 0 5 5 0 0 0 0 0 0 5 5 0 0 0
0 0 5 5 2 0 0 0 0 0 4 0 7 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0
0 5 5 0 3 0 0 5 5 0
0 5 5 0 0 0 0 5 5 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 4 0 0 0 0 0
0 0 8 0 0 0 0 6 0 0
0 0 0 0 0 0 0 0 0 0
3 0 0 0 2 0 0 5 5 0
0 0 7 0 0 0 0 5 5 0
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0
0 5 5 3 0 0 0 5 5 0
0 5 5 0 0 0 0 5 5 0
3 0 8 4 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 6 0 0
0 0 0 0 0 0 2 5 5 0
0 0 0 0 0 0 7 5 5 0
0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 5 5 0 8 0 0 0 0 0 5 5 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 6
0 0 0 0 0 0 5 5 0 0 0 0 0 0 0
0 0 0 0 0 0 5 5 0 0 0 0 0 5 5
0 0 0 0 0 0 0 0 0 0 0 0 0 5 5
0 0 0 1 0 0 0 0 9 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 0 0 0 0 0 0 0 6 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 5 5 8 0 0 0 0 0 0 5 5 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 5 5 0 0 0 0 0 0 6
0 0 0 0 0 0 5 5 0 0 0 0 0 5 5
0 0 0 0 0 0 0 0 9 0 0 0 0 5 5
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 5 5 0 0 0 0 0 0 0 5 5 0 0
0 0 0 0 0 0 0 0 0 0 6 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

Okay, let's break down this task.

## Perception of Elements

1.  **Grid Structure**: Both input and output are 2D grids of integers. The size of the grid varies between examples.
2.  **Cell Values**: The grids contain digits from 0 to 9. '0' appears to represent the background or empty space.
3.  **Key Objects**:
    *   **5-Squares**: A recurring pattern is a 2x2 block composed entirely of the digit '5'. These seem static; they appear in the same location in the output as in the input.
    *   **Singleton Digits**: Other non-zero digits (1, 2, 3, 4, 6, 7, 8, 9 in the examples) appear as individual cells. These digits seem to move from their input positions to new output positions.
4.  **Transformation Pattern**: The core transformation involves relocating the singleton digits. Their final position in the output appears determined by their proximity to the nearest 5-square in the input. The 5-squares themselves act as anchors and remain unchanged. All original positions of the moved singletons become '0' in the output, unless replaced by another moved singleton (which doesn't happen in the examples).

## YAML Fact Document


```yaml
Grid:
  Type: 2D array of integers
  Dimensions: Variable (e.g., 15x15, 10x10)
  BackgroundValue: 0

Objects:
  - Type: StaticAnchor
    Identifier: FiveSquare
    Structure: 2x2 grid cells
    Value: All cells contain the integer 5
    Behavior: Remains in the same position from input to output.

  - Type: MobileElement
    Identifier: SingletonDigit
    Structure: Single grid cell
    Value: Any integer from 1 to 9 (excluding 5 when part of a FiveSquare)
    Behavior: Moves from its input position to a new output position.

Relationships_and_Actions:
  - Action: Relocation
    Target: SingletonDigit
    Rule: Each SingletonDigit moves to a new location based on proximity to a FiveSquare.
    Proximity_Metric: Manhattan distance seems to apply.
    Destination_Rule:
      1. Find the FiveSquare whose center is closest (minimum Manhattan distance) to the SingletonDigit's input position.
         - Tie-breaking (if needed): Choose the FiveSquare whose top-left corner appears first in grid reading order (top-to-bottom, left-to-right).
      2. Identify the 12 cells immediately adjacent (N, S, E, W, diagonals) to the chosen FiveSquare.
      3. Find the adjacent cell closest (minimum Manhattan distance) to the SingletonDigit's original input position.
         - Tie-breaking: Choose the adjacent cell that appears first in grid reading order.
      4. The SingletonDigit moves to this determined adjacent cell in the output grid.
    Effect_on_Origin: The original input cell of the SingletonDigit becomes 0 in the output grid, unless overwritten by the destination of another SingletonDigit.
  - Action: Preservation
    Target: FiveSquare
    Rule: All cells belonging to a FiveSquare retain their value (5) and position in the output grid.
  - Action: Preservation
    Target: Background
    Rule: All cells with value 0 in the input remain 0 in the output, unless overwritten by a moved SingletonDigit.
```


## Natural Language Program

1.  Initialize the output grid as a grid of the same dimensions as the input grid, filled entirely with zeros.
2.  Identify all occurrences of 2x2 squares filled with the digit '5' (FiveSquares) in the input grid. For each FiveSquare found, copy its four '5' values to the corresponding positions in the output grid. Store the top-left coordinates of each identified FiveSquare.
3.  Identify all non-zero cells in the input grid that are *not* part of a FiveSquare (these are the SingletonDigits). Store their digit value and their original (row, column) coordinates.
4.  For each identified SingletonDigit:
    a.  Calculate the distance (using Manhattan distance from the SingletonDigit's coordinates to the effective center coordinates (row+0.5, col+0.5) of the top-left cell) to every FiveSquare identified in step 2.
    b.  Determine the "nearest" FiveSquare based on the minimum calculated distance. If there's a tie in distance, select the FiveSquare whose top-left corner has the lower row index; if row indices are also tied, select the one with the lower column index.
    c.  Consider the 12 empty grid cells that are orthogonally or diagonally adjacent to the nearest FiveSquare found in step 4b.
    d.  Calculate the distance (using Manhattan distance) from the SingletonDigit's *original* coordinates to each of these 12 adjacent cells.
    e.  Determine the "closest" adjacent cell based on the minimum calculated distance. If there's a tie in distance, select the adjacent cell with the lower row index; if row indices are also tied, select the one with the lower column index.
    f.  Place the SingletonDigit's value into this closest adjacent cell's coordinates in the output grid.
5.  Return the completed output grid.
