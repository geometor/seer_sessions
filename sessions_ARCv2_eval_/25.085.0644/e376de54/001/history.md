
## train_1

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 2 7 7 7 7 7 7 7 7 7 7 7 1 7
7 2 7 7 7 7 7 7 7 9 7 7 7 1 7 7
2 7 7 7 7 7 7 7 9 7 7 7 1 7 7 7
7 7 7 2 7 7 7 9 7 7 7 1 7 7 7 7
7 7 2 7 7 7 9 7 7 7 1 7 7 7 7 7
7 7 7 7 7 9 7 7 7 1 7 7 7 7 7 7
7 7 7 7 9 7 7 7 1 7 7 7 7 7 7 7
7 7 7 7 7 7 7 1 7 7 7 1 7 7 7 7
7 7 7 7 7 7 1 7 7 7 1 7 7 7 7 7
7 7 7 7 7 7 7 7 7 1 7 7 7 7 7 7
7 7 7 7 7 7 7 7 1 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 2 7 7 7 7 7 7 7 7 7 7
7 7 7 7 2 7 7 7 7 7 7 7 7 7 7 7
7 7 7 2 7 7 7 2 7 7 7 7 7 7 7 7
7 7 2 7 7 7 2 7 7 7 7 7 7 7 7 7
7 2 7 7 7 2 7 7 7 9 7 7 7 7 7 7
2 7 7 7 2 7 7 7 9 7 7 7 7 7 7 7
7 7 7 2 7 7 7 9 7 7 7 1 7 7 7 7
7 7 2 7 7 7 9 7 7 7 1 7 7 7 7 7
7 7 7 7 7 9 7 7 7 1 7 7 7 1 7 7
7 7 7 7 9 7 7 7 1 7 7 7 1 7 7 7
7 7 7 7 7 7 7 1 7 7 7 1 7 7 7 7
7 7 7 7 7 7 1 7 7 7 1 7 7 7 7 7
7 7 7 7 7 7 7 7 7 1 7 7 7 7 7 7
7 7 7 7 7 7 7 7 1 7 7 7 7 7 7 7
```


## train_2

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 5 5 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 9 9 9 9 9 9 9 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 3 3 3 3 3 3 3 3 3 3 3 3 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 5 5 5 5 5 5 5 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 9 9 9 9 9 9 9 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 3 3 3 3 3 3 3 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


## train_3

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 7 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 7 7 7 8 7 8 7 7 7 7 7 8 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 8 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 8 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 8 7 7 8 7 8 7 8 7 7 7 8 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```

*   **Perception:** The task involves modifying a grid based on the color of pixels and their relationship to neighboring pixels or global landmarks within the grid. The background color is consistently orange (7). The modifications appear to be color-specific rules involving horizontal extension or contraction relative to neighbors or the position of maroon (9) pixels.

*   **Facts:**
    
```yaml
    task_context:
      grid_size: Variable (e.g., 16x16).
      background_color: Orange (7).
      objects: Pixels or contiguous horizontal segments of non-background colors (Red-2, Blue-1, Green-3, Gray-5, Azure-8, Maroon-9).
    
    transformations:
      - color: Red (2)
        action: Conditional Pixel Duplication (Leftward)
        condition: If the pixel immediately to the left is Orange (7).
        effect: The left Orange pixel becomes Red (2).
    
      - color: Gray (5)
        action: Conditional Horizontal Extension (Rightward)
        condition: For a Gray pixel or segment, extend right into adjacent Orange (7) pixels.
        limit: Stop extension at the column index corresponding to the rightmost Maroon (9) pixel found anywhere in the grid, or the grid boundary if earlier. If no Maroon pixels exist, extend to the grid boundary.
    
      - color: Green (3)
        action: Conditional Horizontal Contraction (From Right)
        condition: For Green pixels located in columns to the right of the rightmost Maroon (9) pixel.
        limit: The rightmost column allowed for Green is the column index of the rightmost Maroon (9) pixel. If no Maroon pixels exist, no contraction occurs.
        effect: Green pixels violating the condition are changed to Orange (7).
    
      - color: Maroon (9)
        action: No change.
        
      - color: Blue (1)
        action: No change.
    
      - color: Azure (8)
        action: No change.
    
      - color: Orange (7)
        action: May be changed by Red or Gray rules, otherwise no change.
    
    global_dependency:
      - The rules for Gray (5) and Green (3) depend on the maximum column index occupied by any Maroon (9) pixel in the entire input grid.
    ```


*   **Natural Language Program:**
    1.  Create an output grid as a copy of the input grid.
    2.  Determine the maximum column index (`max_col_maroon`) occupied by any maroon (9) pixel across the entire input grid. If no maroon pixels are present, set `max_col_maroon` to the last column index of the grid (width - 1).
    3.  **Process Red Pixels:** Iterate through each cell `(r, c)` of the input grid. If the input cell `(r, c)` is red (2) and its left neighbor `(r, c-1)` exists (`c > 0`) and is orange (7) in the input grid, set the corresponding cell `(r, c-1)` in the output grid to red (2).
    4.  **Process Gray Pixels:** Iterate through each row `r` of the output grid. Within each row, repeatedly scan from left to right (`c` from 0 to width-2). If a cell `(r, c)` is gray (5) and the cell to its right `(r, c+1)` is orange (7) and the column index `c+1` is less than or equal to `max_col_maroon`, change the cell `(r, c+1)` to gray (5). Continue scanning and modifying the row until a full pass results in no changes for that row.
    5.  **Process Green Pixels:** Iterate through each cell `(r, c)` of the output grid. If the cell `(r, c)` is green (3) and its column index `c` is greater than `max_col_maroon`, change the cell `(r, c)` to orange (7).
    6.  Return the modified output grid.
