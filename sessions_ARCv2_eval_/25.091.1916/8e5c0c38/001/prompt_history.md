
## train_1

**input:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 1 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 1 1 1 8 1 1 1 8 8 8 8 8 8 8 8 8 8
8 8 8 8 1 1 8 8 8 8 8 1 1 8 8 6 6 6 6 8 8 8
8 8 8 8 8 1 8 8 8 8 8 1 8 8 8 8 6 8 6 8 8 8
8 8 8 8 1 1 8 1 1 1 8 1 8 8 8 8 6 6 6 8 8 8
8 8 8 8 1 1 1 1 8 1 1 1 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 1 8 8 8 1 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 2 8 8 8 2 2 2 8 8 8 8
8 8 8 8 8 8 8 8 8 2 2 8 2 2 2 8 2 2 8 8 8 8
8 8 8 8 8 8 8 8 8 8 2 2 8 8 8 2 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
```


**output:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 1 1 1 8 1 1 1 8 8 8 8 8 8 8 8 8 8
8 8 8 8 1 1 8 8 8 8 8 1 1 8 8 8 6 6 6 8 8 8
8 8 8 8 8 1 8 8 8 8 8 1 8 8 8 8 6 8 6 8 8 8
8 8 8 8 8 1 8 1 1 1 8 1 8 8 8 8 6 6 6 8 8 8
8 8 8 8 8 1 1 1 8 1 1 1 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 1 8 8 8 1 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 2 8 8 8 2 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 2 2 8 2 2 2 8 2 2 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 2 8 8 8 2 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 0 0 2 2 0 0
0 0 0 0 0 0 0 8 0 0 0 0 0 0 2 2 0 0 2 2 0 0
0 0 0 0 0 8 8 0 8 0 0 0 0 0 0 2 2 2 2 0 0 0
0 0 0 0 0 8 8 0 8 0 0 0 0 0 0 0 2 2 0 0 0 0
0 0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 0 0 0 4 4 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 4 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 0 0 2 2 0 0
0 0 0 0 0 0 0 8 0 0 0 0 0 0 2 2 0 0 2 2 0 0
0 0 0 0 0 0 8 0 8 0 0 0 0 0 0 2 2 2 2 0 0 0
0 0 0 0 0 0 8 0 8 0 0 0 0 0 0 0 2 2 0 0 0 0
0 0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 4 4 0 0 0 4 4 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 4 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

Okay, let's analyze the provided examples.

**Perception**

1.  **Grid Structure:** Both input and output grids are the same size in each example.
2.  **Colors:** The examples use multiple colors against a dominant background color (azure-8 in train\_1, white-0 in train\_2).
3.  **Objects:** The non-background colors form distinct shapes or objects within the grid.
4.  **Transformation:** The transformation involves removing specific pixels from the non-background objects. The background pixels remain unchanged.
5.  **Pattern of Removal:** Comparing inputs and outputs, the removed pixels seem to be 'weakly connected' parts of the objects. Specifically, observing the neighbours (including diagonals) of the pixels that are removed, they consistently have exactly 3 neighbours of the *same* color as themselves. Pixels with fewer or more than 3 same-colored neighbours remain unchanged.

**Facts**


```yaml
task_description: Modifies objects by removing pixels based on their local neighborhood connectivity.

definitions:
  - background_color: The color that occupies the most cells in the input grid.
  - object_pixel: A pixel whose color is not the background_color.
  - neighbor: Any of the 8 cells directly or diagonally adjacent to a given cell.
  - same_color_neighbor: A neighbor cell that has the same color as the central cell being considered.

examples:
  - id: train_1
    input:
      background_color: 8 # azure
      objects:
        - color: 1 # blue
        - color: 6 # magenta
        - color: 2 # red
      transformation:
        action: remove_pixels
        condition: Pixels with exactly 3 same_color_neighbors are changed to the background_color (8).
    output:
      preserves:
        - grid_dimensions
        - background_color
        - object_colors (partially)
      changes:
        - Specific pixels within objects are replaced by the background_color.
  - id: train_2
    input:
      background_color: 0 # white
      objects:
        - color: 2 # red
        - color: 8 # azure
        - color: 4 # yellow
      transformation:
        action: remove_pixels
        condition: Pixels with exactly 3 same_color_neighbors are changed to the background_color (0).
    output:
      preserves:
        - grid_dimensions
        - background_color
        - object_colors (partially)
      changes:
        - Specific pixels within objects are replaced by the background_color.

general_rule:
  - step: 1
    action: Identify the background color (most frequent color in the input grid).
  - step: 2
    action: Create a copy of the input grid for modification.
  - step: 3
    action: Iterate through each cell (pixel) of the input grid.
  - step: 4
    action: For each cell that is NOT the background color:
      - sub_step: 4.1
        action: Count its 8 neighbors (orthogonal and diagonal) that have the same color as the cell itself.
      - sub_step: 4.2
        condition: If the count of same_color_neighbors is exactly 3.
        action: Change the color of the corresponding cell in the copied grid to the background color.
  - step: 5
    action: Return the modified grid.
```


**Natural Language Program**

1.  Determine the background color by finding the most frequent color in the input grid.
2.  Initialize the output grid as a copy of the input grid.
3.  Iterate through each pixel (cell) of the input grid using its row and column index.
4.  For the current pixel, check if its color is the background color.
5.  If the current pixel's color is *not* the background color:
    a.  Examine its eight neighbours (up, down, left, right, and the four diagonals).
    b.  Count how many of these neighbours have the exact same color as the current pixel.
    c.  If this count is precisely 3, update the corresponding pixel in the output grid to the background color.
6.  If the current pixel's color *is* the background color, or if the count of same-colored neighbours is not 3, leave the corresponding pixel in the output grid unchanged from the initial copy.
7.  After checking all pixels, return the final output grid.
