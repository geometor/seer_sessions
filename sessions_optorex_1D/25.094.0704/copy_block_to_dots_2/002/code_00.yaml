objects:
  - name: input_sequence
    type: numpy_array_of_integers # Updated type
    properties:
      - length: 12
      - contains: zeros and a repeating non-zero integer (N)
      - structure: Starts with approximately [N, N, N, ...]
  - name: output_sequence
    type: list_of_integers # Output type from proposed adapted code
    properties:
      - length: 12 (same as input)
      - derived_from: input_sequence
  - name: non_zero_integer
    symbol: N
    properties:
      - value: Determined by the first non-zero element found in the input_sequence
      - role: Primary digit used in patterns and replacements
  - name: zero
    symbol: 0
    properties:
      - value: 0
      - role: Placeholder or separator

actions:
  - name: convert_to_list
    actor: transformation_rule
    input: input_sequence (numpy_array)
    output: input_list (list_of_integers)
  - name: identify_non_zero_value
    actor: transformation_rule
    input: input_list
    output: non_zero_integer (N)
  - name: identify_trigger_points
    actor: transformation_rule
    input: input_list, non_zero_integer (N)
    output: list_of_indices
    description: >
      Find indices 'i' (starting from index 3 up to length-2)
      where input_list[i] == N and input_list[i-1] != N.
  - name: copy_list
    actor: transformation_rule
    input: input_list
    output: output_list (mutable copy of input_list)
  - name: replace_elements
    actor: transformation_rule
    target: output_list
    using: non_zero_integer (N), trigger_point_index (i)
    description: >
      For each identified trigger point index 'i', set the elements
      at indices [i-1, i, i+1] in the output_list to N.

relationships:
  - type: transformation
    from: input_sequence (numpy_array)
    to: output_sequence (list_of_integers)
    rule: >
      The output sequence is generated by first converting the input NumPy array
      to a Python list. A mutable copy of this list is created.
      The non-zero value 'N' is identified. Trigger indices 'i' are found in the
      original list where list[i] == N and list[i-1] != N (for i >= 3).
      For each trigger index 'i', the elements at indices i-1, i, and i+1
      in the *copied* list are replaced with N, N, N. The final modified list is returned.
  - type: definition
    element: non_zero_integer (N)
    defined_by: The value of the first non-zero element encountered in the input sequence.