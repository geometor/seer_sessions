facts:
  - grid_properties:
      - background_color: 0 # white
      - same_dimensions: Input and Output grids have identical height and width.
  - objects:
      - input_pixels:
          - description: Pixels in the input grid with a non-background color.
          - property: color (consistent within a single input grid, e.g., 8, 7, or 6)
          - property: coordinates (row, col)
      - input_bounding_box:
          - description: The smallest rectangle enclosing all input_pixels.
          - property: min_row
          - property: max_row
          - property: min_col
          - property: max_col
          - property: height (max_row - min_row + 1)
          - property: width (max_col - min_col + 1)
          - property: center_col_index ((min_col + max_col) / 2)
      - input_pixel_distribution:
          - description: Spatial arrangement of input_pixels.
          - property: average_col_index (mean of column indices of input_pixels)
      - output_rectangle:
          - description: A solid rectangle drawn in the output grid.
          - property: color (same as input_pixels color)
          - property: out_min_row
          - property: out_max_row
          - property: out_min_col
          - property: out_max_col
          - property: out_height (out_max_row - out_min_row + 1)
          - property: out_width (out_max_col - out_min_col + 1)
  - relationships_and_actions:
      - find_pixels: Identify all input_pixels with non-background color.
      - determine_color: Record the color of the input_pixels.
      - calculate_input_bbox: Compute min_row, max_row, min_col, max_col for input_pixels.
      - calculate_distribution: Compute average_col_index for input_pixels.
      - calculate_output_dims:
          - out_height = (max_row - min_row + 1) - 2
          - out_width = (max_col - min_col + 1) + 1
      - calculate_output_position:
          - out_min_row = min_row + 1
          - out_max_row = max_row - 1 # derived: out_min_row + out_height - 1
          - center_col_index = (min_col + max_col) / 2
          - offset = 1 if average_col_index > center_col_index else 0
          - out_min_col = floor(center_col_index) + offset
          - out_max_col = out_min_col + out_width - 1 # derived
      - draw_output: Create an output grid of the same size as input, filled with background_color. Fill the area defined by (out_min_row, out_min_col) to (out_max_row, out_max_col) inclusive with the determined color.