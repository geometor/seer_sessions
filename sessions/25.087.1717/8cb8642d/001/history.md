
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 6 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 3 6 0 0 0 0 0 6 3 0 0 0
0 0 3 0 6 0 0 0 6 0 3 0 0 0
0 0 3 0 0 6 0 6 0 0 3 0 0 0
0 0 3 0 0 0 6 0 0 0 3 0 0 0
0 0 3 0 0 0 6 0 0 0 3 0 0 0
0 0 3 0 0 6 0 6 0 0 3 0 0 0
0 0 3 0 6 0 0 0 6 0 3 0 0 0
0 0 3 6 0 0 0 0 0 6 3 0 0 0
0 0 3 3 3 3 3 3 3 3 3 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 1 2 2 2 2 2 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 2 1 0 0 0 0 1 2 0 0 0 0 0 0
0 2 0 1 0 0 1 0 2 0 0 0 0 0 0
0 2 0 0 1 1 0 0 2 0 0 0 0 0 0
0 2 0 1 0 0 1 0 2 0 0 0 0 0 0
0 2 1 0 0 0 0 1 2 0 0 0 0 0 0
0 2 2 2 2 2 2 2 2 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 2 3 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 2 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 3 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 1 1 1 1 1 1 0 0 3 3 3 3 3 3 0
0 0 1 2 0 0 0 2 1 0 0 3 2 0 0 2 3 0
0 0 1 0 2 0 2 0 1 0 0 3 0 2 2 0 3 0
0 0 1 0 0 2 0 0 1 0 0 3 0 2 2 0 3 0
0 0 1 0 2 0 2 0 1 0 0 3 2 0 0 2 3 0
0 0 1 2 0 0 0 2 1 0 0 3 3 3 3 3 3 0
0 0 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 4 3 0 0 0 0 0 0 0 3 4 0
0 0 0 0 0 0 4 0 3 0 0 0 0 0 3 0 4 0
0 0 0 0 0 0 4 0 0 3 3 3 3 3 0 0 4 0
0 0 0 0 0 0 4 0 3 0 0 0 0 0 3 0 4 0
0 0 0 0 0 0 4 3 0 0 0 0 0 0 0 3 4 0
0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 4 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

*   **Perception:** The input grids contain one or more large, roughly rectangular objects composed of a single color, potentially with one pixel of a different color inside them ('marker pixel'). The background is white (0). The output grids show that the interior of objects containing a marker pixel is modified. A pattern, resembling the boundary of a diamond or rotated square, is drawn using the marker pixel's color. This pattern expands outwards from the original marker location until it hits the boundary of the original object. The pixels inside this drawn pattern, including the original marker location, are changed to white (0). Pixels that were originally part of the object but are outside the drawn pattern are also changed to white (0). Objects without a marker pixel remain unchanged. The size and color of the objects and markers vary across examples.

*   **YAML Facts:**
    
```yaml
    task_description: Modify objects containing a single 'marker' pixel by drawing a diamond boundary pattern.
    
    elements:
      - object: Grid
        description: A 2D array of pixels with integer values 0-9 representing colors.
      - object: Background
        color: white (0)
        description: The area surrounding the main shapes. Remains unchanged.
      - object: Shape
        description: A contiguous region of non-white pixels, primarily of one color.
        properties:
          - color: The dominant color of the shape (e.g., green, red, blue, yellow).
          - boundary: The edge pixels separating the shape from the background or other shapes.
          - interior: Pixels belonging to the shape, not on the boundary.
      - object: Marker Pixel
        description: A single pixel within a Shape object having a different color than the Shape's dominant color.
        properties:
          - color: The color of the marker pixel (e.g., magenta, blue, red, green).
          - location: The (row, column) coordinates within the grid.
        relation_to_shape: Located inside a Shape object. Exactly one marker per modified shape.
    
    actions:
      - action: Identify Shapes and Markers
        inputs: Input grid
        outputs: List of shapes, their colors, boundaries, and marker pixel details (if any).
      - action: Draw Diamond Boundary
        description: For shapes with a marker, draw a pattern expanding diagonally from the marker location.
        details:
          - Pattern Shape: Boundary of a diamond/rotated square centered at the marker location.
          - Pattern Color: Use the color of the marker pixel.
          - Expansion Rule: The pattern expands layer by layer (based on Manhattan distance `d` from the marker: `abs(r-mr) + abs(c-mc) == d`).
          - Boundary Condition: The pattern stops drawing at pixels that were *not* part of the original shape's color in the input grid. Only pixels that originally had the shape's color are potentially changed.
          - Output Color: Pixels forming the diamond boundary pattern are set to the marker's color in the output grid.
      - action: Clear Interior
        description: For shapes modified by the Draw Diamond Boundary action, change remaining interior pixels to white.
        details:
          - Target Pixels: All pixels within the shape's original area (input grid) that had the shape's dominant color but were *not* colored by the Draw Diamond Boundary action. This includes the original marker pixel location.
          - Output Color: Set these pixels to white (0) in the output grid.
      - action: Preserve Unmarked Shapes
        description: Shapes without a marker pixel are copied unchanged from input to output.
    
    relationships:
      - The presence of a single marker pixel within a shape triggers the transformation (Draw Diamond Boundary, Clear Interior).
      - The marker pixel's color determines the color of the drawn pattern.
      - The marker pixel's location determines the center of the drawn pattern.
      - The original shape's boundary limits the extent of the drawn pattern.
      - The original shape's color identifies which pixels are eligible for modification (either to marker color or to white).
    ```


*   **Natural Language Program:**

    1.  Iterate through the input grid to identify distinct contiguous objects (shapes) made of a single non-white color. For each shape, record its primary color, and the set of coordinates it occupies.
    2.  For each identified shape, scan its constituent pixels in the input grid to find if there is exactly one pixel ('marker') with a color different from the shape's primary color. Record the marker's color and its coordinates (marker\_row, marker\_col) if found.
    3.  Create an output grid initialized as a copy of the input grid.
    4.  For each shape that was found to have a marker:
        a.  Initialize a set of `pixels_to_clear` containing all coordinates belonging to the shape in the input.
        b.  Initialize a set `pixels_colored_by_pattern`.
        c.  Iterate through increasing Manhattan distances `d` (starting from `d=1`) from the marker's coordinates (marker\_row, marker\_col).
        d.  For each distance `d`, find all coordinates (r, c) such that `abs(r - marker_row) + abs(c - marker_col) == d`.
        e.  For each coordinate (r, c) found in step 4d:
            i.  Check if (r, c) is within the grid bounds.
            ii. Check if the pixel at (r, c) in the *input* grid originally belonged to the current shape (i.e., its color was the shape's primary color).
            iii. If both checks pass, change the color of the pixel at (r, c) in the *output* grid to the marker's color, and add (r,c) to the `pixels_colored_by_pattern` set.
        f.  Stop increasing `d` when no more pixels meeting the criteria in step 4e(ii) can be colored for a given distance `d`.
        g.  Remove all coordinates present in `pixels_colored_by_pattern` from the `pixels_to_clear` set.
        h.  For every remaining coordinate (r, c) in the `pixels_to_clear` set, change the color of the pixel at (r, c) in the *output* grid to white (0). This includes the original marker location.
    5.  Return the modified output grid. Shapes that did not have a marker remain unchanged from the initial copy (step 3).
