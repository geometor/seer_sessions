import numpy as np

def find_object(grid, color):
    coords = np.argwhere(grid == color)
    return coords

def rotate_point(point, center):
    y, x = point
    center_y, center_x = center
    new_y = center_y + (x - center_x)
    new_x = center_x - (y - center_y)
    return (new_y, new_x)

def transform(input_grid):
    output_grid = np.copy(input_grid)
    red_pixels = find_object(input_grid, 2)
    if len(red_pixels) == 0:
        return output_grid
    center_y = np.mean(red_pixels[:, 0]).astype(int)
    center_x = np.mean(red_pixels[:, 1]).astype(int)
    center = (center_y, center_x)
    for y, x in red_pixels:
      output_grid[y,x] = 0
    for point in red_pixels:
        new_point = rotate_point(point, center)
        if 0 <= new_point[0] < output_grid.shape[0] and 0 <= new_point[1] < output_grid.shape[1]:
          output_grid[new_point] = 2
    return output_grid

def analyze_example(input_grid, expected_output_grid):
    actual_output_grid = transform(input_grid)
    red_pixels_input = find_object(input_grid, 2)
    red_pixels_expected = find_object(expected_output_grid, 2)
    red_pixels_actual = find_object(actual_output_grid, 2)

    center_input_y = np.mean(red_pixels_input[:, 0]).astype(int) if len(red_pixels_input) > 0 else None
    center_input_x = np.mean(red_pixels_input[:, 1]).astype(int) if len(red_pixels_input) > 0 else None
    discrepancy = not np.array_equal(expected_output_grid, actual_output_grid)

    return {
        "input_center": (center_input_y, center_input_x),
        "red_pixels_input": red_pixels_input.tolist(),
        "red_pixels_expected": red_pixels_expected.tolist(),
        "red_pixels_actual": red_pixels_actual.tolist(),
        "discrepancy": discrepancy,
    }
task = {
  "train": [
    {
      "input": [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
        [0, 0, 2, 2, 2, 2, 2, 0, 0, 0],
        [0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      ],
      "output": [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 2, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 2, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 2, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      ]
    },
    {
      "input": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 2, 0, 0, 0, 0, 0],
        [0, 0, 0, 2, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ],
      "output": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 2, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ]
    },
    {
      "input": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ],
      "output": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 2, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ]
    },
      {
      "input": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ],
      "output": [
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 2, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [3, 0, 0, 0, 0, 0, 0, 0, 0, 3]
      ]
    }
  ]
}

results = []
for example in task["train"]:
  input_grid = np.array(example["input"])
  expected_output_grid = np.array(example["output"])
  results.append(analyze_example(input_grid, expected_output_grid))

for i, result in enumerate(results):
    print(f"Example {i+1}:")
    print(f"  Input Center: {result['input_center']}")
    print(f"  Red Pixels (Input): {result['red_pixels_input']}")
    print(f"  Red Pixels (Expected): {result['red_pixels_expected']}")
    print(f"  Red Pixels (Actual): {result['red_pixels_actual']}")
    print(f"  Discrepancy: {result['discrepancy']}")
    print("-" * 20)