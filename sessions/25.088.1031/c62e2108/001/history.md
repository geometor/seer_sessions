
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 1
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 1
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 1
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 2 0 0 2 2 0 0 2 2 0 0 2 2 0 0
0 0 2 0 0 2 2 0 0 2 2 0 0 2 2 0 0
0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 1
1 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 1
1 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 1
1 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0 0 0 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 0 0 8 8 0 0 8 8 0 0 8 8 0 0 8 8 0 0
8 0 0 8 8 0 0 8 8 0 0 8 8 0 0 8 8 0 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
3 3 3 3 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
0 3 3 0 0 3 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
0 3 3 0 0 3 3 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0
3 3 3 3 3 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 3 3 3
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 3 0 0 3 3 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 3 0 0 3 3 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 3 3 3
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0
```

*   **Perception:** The task involves identifying specific patterns (contiguous non-white, non-blue shapes) and markers (1x4 or 4x1 blue lines) in the input grid. The markers act as directional cues associated with the patterns. The transformation involves tiling or repeating the patterns in the directions indicated by the markers associated with them. The tiling fills the space between the pattern's edge and the corresponding grid edge, but only along the rows or columns occupied by the pattern's bounding box. The blue markers are removed in the output.

*   **YAML Facts:**
    
```yaml
    elements:
      - object: pattern
        description: Contiguous block of non-white, non-blue pixels. Each task example contains one or more distinct patterns.
        properties:
          - color: The specific color of the pattern (e.g., red, azure, green).
          - bounding_box: The smallest rectangle enclosing the pattern.
          - pixels: The grid content within the bounding box.
      - object: marker
        description: A line of 4 blue pixels, oriented either horizontally (1x4) or vertically (4x1).
        properties:
          - color: Always blue (1).
          - orientation: horizontal or vertical.
          - location: The coordinates of the blue pixels.
      - object: grid
        description: The 2D array of pixels.
        properties:
          - height: Number of rows.
          - width: Number of columns.

    relationships:
      - type: association
        subject: marker
        object: pattern
        description: A marker is associated with a pattern if the marker lies directly adjacent to and perfectly aligned with one of the four sides (top, bottom, left, right) of the pattern's bounding box.
        details:
          - A horizontal marker above aligns with the top edge.
          - A horizontal marker below aligns with the bottom edge.
          - A vertical marker to the left aligns with the left edge.
          - A vertical marker to the right aligns with the right edge.

    actions:
      - action: identify
        actor: system
        target: patterns and markers
        description: Locate all patterns and markers in the input grid. Determine pattern bounding boxes and marker orientations/locations.
      - action: associate
        actor: system
        target: markers and patterns
        description: Determine which markers are associated with which patterns based on alignment with bounding box edges.
      - action: remove
        actor: system
        target: markers
        description: Remove all blue markers from the grid representation that will become the output.
      - action: tile
        actor: system
        target: pattern
        description: Repeat the pixel content of a pattern's bounding box in specific directions.
        details:
          - Direction is determined by associated markers (up, down, left, right).
          - Tiling occurs along the rows (for horizontal tiling) or columns (for vertical tiling) defined by the pattern's bounding box.
          - Tiling fills the space from the pattern's edge towards the grid edge in the specified direction.
          - Tiling copies the entire bounding box content, including white pixels.
          - Tiling overwrites any existing pixels in the target area.

    state_change:
      - Initial state: Input grid with patterns and markers.
      - Intermediate state: Grid copy with markers removed.
      - Final state: Output grid where patterns have been tiled according to associated marker directions.
    ```


*   **Natural Language Program:**
    1.  Initialize the output grid as a copy of the input grid.
    2.  Find all contiguous blocks of pixels that are not white (0) or blue (1). These are the "patterns". For each pattern, determine its bounding box (minimum and maximum row and column).
    3.  Find all linear blocks of 4 blue (1) pixels, either horizontal (1x4) or vertical (4x1). These are the "markers".
    4.  Remove all blue pixels (markers) from the output grid by setting their color to white (0).
    5.  For each identified pattern with bounding box from (row\_min, col\_min) to (row\_max, col\_max):
        a.  Check for associated markers:
            i.  **Up Marker:** Is there a horizontal marker entirely within columns col\_min to col\_max, located at a row index less than row\_min?
            ii. **Down Marker:** Is there a horizontal marker entirely within columns col\_min to col\_max, located at a row index greater than row\_max?
            iii. **Left Marker:** Is there a vertical marker entirely within rows row\_min to row\_max, located at a column index less than col\_min?
            iv. **Right Marker:** Is there a vertical marker entirely within rows row\_min to row\_max, located at a column index greater than col\_max?
        b.  Let the height be `H = row_max - row_min + 1` and width be `W = col_max - col_min + 1`.
        c.  If an **Up Marker** is found: Repeatedly copy the block of pixels from the pattern's current bounding box location `(r, c)` to `(r-H, c)` for `r = row_min` stepping by `-H`, as long as `r-H` is non-negative. Perform this copy only for columns `col_min` to `col_max`.
        d.  If a **Down Marker** is found: Repeatedly copy the block of pixels from the pattern's current bounding box location `(r, c)` to `(r+H, c)` for `r = row_min` stepping by `+H`, as long as `r+H` is within the grid height bounds. Perform this copy only for columns `col_min` to `col_max`.
        e.  If a **Left Marker** is found: Repeatedly copy the block of pixels from the pattern's current bounding box location `(r, c)` to `(r, c-W)` for `c = col_min` stepping by `-W`, as long as `c-W` is non-negative. Perform this copy only for rows `row_min` to `row_max`.
        f.  If a **Right Marker** is found: Repeatedly copy the block of pixels from the pattern's current bounding box location `(r, c)` to `(r, c+W)` for `c = col_min` stepping by `+W`, as long as `c+W` is within the grid width bounds. Perform this copy only for rows `row_min` to `row_max`.
    6.  Return the modified output grid.
