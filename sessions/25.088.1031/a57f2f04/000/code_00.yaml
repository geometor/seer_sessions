facts:
  - grid_elements:
      - background: color 8 (azure) forms borders/frames.
      - enclosed_regions: areas within the azure borders, initially mostly color 0 (white).
      - pattern_kernels: small, non-contiguous or contiguous groups of pixels with colors other than white (0) or azure (8), located within an enclosed_region.
  - properties:
      - enclosed_regions are rectangular or composed of rectangular sub-parts.
      - pattern_kernels define a repeating unit.
      - the size and shape of the enclosed_regions vary.
      - the size, shape, and colors of the pattern_kernels vary.
      - multiple independent enclosed_regions can exist in one grid.
  - actions:
      - identify: locate the azure background/borders.
      - identify: locate the regions enclosed by the background.
      - identify: find the non-white, non-azure "seed" pixels within each enclosed region.
      - determine: find the minimal bounding box containing all seed pixels within a region. This defines the pattern_kernel area.
      - extract: capture the pixel values within the pattern_kernel's bounding box from the input grid.
      - tile/fill: repeat the extracted pattern_kernel across the entire corresponding enclosed_region in the output grid.
      - preserve: maintain the azure background in the output.
  - relationships:
      - each enclosed_region contains exactly one pattern_kernel definition (even if it's just one pixel).
      - the pattern_kernel dictates the fill pattern for its corresponding enclosed_region.
      - the tiling origin is the top-left corner of the enclosed_region.
      - the tiling repeats based on the dimensions of the pattern_kernel's bounding box.