
## train_1

**input:**
```
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 4 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 4 0 4 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 4 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
```


**output:**
```
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
0 0 0 2 4 0 4 2 0 0 0 2 4 0 4 2 0 0 0 2 4 0 4
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
0 0 0 2 4 0 4 2 0 0 0 2 4 0 4 2 0 0 0 2 4 0 4
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
0 0 0 2 4 0 4 2 0 0 0 2 4 0 4 2 0 0 0 2 4 0 4
0 0 0 2 0 4 0 2 0 0 0 2 0 4 0 2 0 0 0 2 0 4 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0 2 0 0 0
```


## train_2

**input:**
```
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 3 3 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 3 3 3 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 3 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
```


**output:**
```
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0
0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0
0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0
0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0
0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0 1 3 3 0 1 0 0 0
0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0 1 3 3 3 1 0 0 0
0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0 1 0 3 0 1 0 0 0
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0
```


## train_3

**input:**
```
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 2 2 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 2 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 2 2 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
```


**output:**
```
0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0
0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0
0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0
0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0
0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0
0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0 0 0 8 0 2 0 8 0
0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0 0 0 8 0 2 2 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0 0 0 8 0
8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8
0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0 0 0 8 2 2 0 8 0
```

*   **Perception**:
    *   The input and output grids have the same dimensions.
    *   Both input and output grids feature a larger grid structure defined by horizontal and vertical lines of a single, consistent color (red, blue, or azure in the examples). These lines appear regularly, creating smaller, identically sized cells or subgrids within the main grid.
    *   In the input grids, these subgrids are mostly white (0), except for *one* subgrid which contains a unique pattern composed of a different color (yellow, green, or red).
    *   The transformation involves identifying this unique pattern and its location (which subgrid it occupies).
    *   In the output grid, this unique pattern is replicated into all other subgrids that fall on the same row or same column as the original pattern's subgrid within the larger grid structure.
    *   The grid lines and the background white pixels remain unchanged.

*   **Facts**:
    
```yaml
    elements:
      - item: grid_structure
        description: The main grid is divided by regularly spaced horizontal and vertical lines of a single color (grid_color).
        properties:
          line_color: Varies per example (red=2, blue=1, azure=8).
          spacing: Lines occur every 4th row and 4th column (indices 3, 7, 11, ...).
          subgrid_size: The lines define internal subgrids of size 3x3.
      - item: subgrid
        description: A 3x3 area bounded by the grid lines or the grid edges.
        properties:
          content: Primarily white (0) in the input.
      - item: source_pattern
        description: A unique 3x3 pattern found within exactly one subgrid in the input.
        properties:
          location: Defined by the row and column index of the subgrid it occupies within the grid-of-subgrids.
          content: A specific 3x3 arrangement of pixels, including a distinct pattern_color (yellow=4, green=3, red=2).
          size: 3x3.
      - item: target_subgrids
        description: The subgrids in the output grid where the source_pattern is copied.
        properties:
          location: All subgrids sharing the same row index OR the same column index as the source_pattern's subgrid.

    actions:
      - action: identify_grid_structure
        input: input_grid
        output: grid_color, line_spacing, subgrid_size, list_of_subgrid_coordinates
      - action: locate_source_pattern
        input: input_grid, grid_structure
        output: source_pattern (3x3 array), source_subgrid_row_index, source_subgrid_column_index
        details: Iterate through subgrids to find the one containing colors other than white and the grid_color.
      - action: replicate_pattern
        input: source_pattern, source_subgrid_indices, grid_structure, input_grid
        output: output_grid
        details: Create a copy of the input grid. Iterate through all subgrid locations. If a subgrid's row index or column index matches the source_subgrid's row or column index, overwrite that subgrid in the copied grid with the source_pattern.

    relationships:
      - relation: spatial_repetition
        item1: source_pattern
        item2: target_subgrids
        details: The source_pattern is copied to target_subgrids based on their row/column alignment with the source subgrid within the grid-of-subgrids.
    ```


*   **Natural Language Program**:
    1.  Analyze the input grid to identify the repeating horizontal and vertical lines and determine their color (the `grid_color`) and spacing. This defines a grid of 3x3 subgrids. Determine the total number of rows and columns of these subgrids.
    2.  Iterate through each 3x3 subgrid defined in step 1. Locate the single subgrid that contains pixels with colors other than white (0) and the `grid_color`.
    3.  Extract the 3x3 pattern from this unique subgrid (the `source_pattern`) and record the row index (`source_row`) and column index (`source_col`) of this subgrid within the grid-of-subgrids structure.
    4.  Create the output grid as a copy of the input grid.
    5.  Iterate through all subgrid locations identified in step 1, using their row index (`r`) and column index (`c`).
    6.  For each subgrid location (`r`, `c`), check if `r` is equal to `source_row` OR `c` is equal to `source_col`.
    7.  If the condition in step 6 is true, overwrite the corresponding 3x3 area in the output grid with the `source_pattern`.
    8.  Return the modified output grid.
