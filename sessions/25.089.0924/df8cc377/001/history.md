
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 0
0 0 2 2 2 2 2 0 0 0 8 0 0 0 0 0 0 0 0 0
0 0 2 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 0 0 2 0 0 0 0 0 0 0 0 0 0 4 0 0
0 0 2 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 2 0 0 0 0 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 4 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 0 0 4 0 0 0 0 0 0 0 0 0 0 0 0 4
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 3 3 0 0
0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 3 0 0
0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 3 0 0
0 0 0 0 8 0 0 0 0 3 3 3 3 3 3 3 3 3 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0 0 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 8 0 8 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 0 8 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 8 0 8 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 3 3 0 0
0 0 0 0 0 0 0 0 0 3 4 0 4 0 4 0 4 3 0 0
0 0 0 0 0 0 0 0 0 3 0 4 0 4 0 4 0 3 0 0
0 0 0 0 0 0 0 0 0 3 3 3 3 3 3 3 3 3 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 6 0 0 0 0 0 0 0 0 0 0 0 0
0 8 8 8 8 8 8 8 0 0 0 0 0 0 6 0 0 0 0 0 0 0 0
0 8 0 0 0 0 0 8 0 0 0 0 0 0 0 0 6 0 0 0 6 0 0
0 8 0 0 0 0 0 8 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0
0 8 8 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 6 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 6 0 0 0 0 4 4 4 4 4 4 4 0 0
0 0 0 6 0 0 0 0 0 0 0 0 0 0 4 0 0 0 0 0 4 0 0
0 0 0 0 0 0 0 3 0 0 0 0 0 0 4 0 0 0 0 0 4 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 4 0 0 0 0 0 4 0 0
0 0 0 0 0 6 0 0 0 0 0 0 0 0 4 0 0 0 0 0 4 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 0 4 0 0 0 0 0 4 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 4 0 0 0 0 0 4 0 0
0 0 0 0 0 3 0 0 0 0 6 0 0 0 4 4 4 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 6 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 3 0 0 0 0 0 0 0 0 6 0 0 0 0 0 0 0 0 6 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 6 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 8 8 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 8 3 0 3 0 3 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 8 0 3 0 3 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 8 8 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 6 0 6 0 6 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 6 0 6 0 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 6 0 6 0 6 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 6 0 6 0 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 6 0 6 0 6 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 6 0 6 0 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0
0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 8 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 2 0 2 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

Okay, let's break down this task.

**Perception of Task Elements**

1.  **Input/Output Structure:** Both input and output are grids of colored pixels (represented by integers 0-9). The background is white (0).
2.  **Key Objects:** The primary objects in the input grids are hollow rectangles made of a single color. These rectangles have a frame exactly one pixel thick.
3.  **Other Elements:** Besides the rectangles, the input grids contain scattered single pixels of various colors, distinct from the rectangle colors and the background.
4.  **Transformation:** The transformation involves modifying the interior of the hollow rectangles and removing the scattered pixels.
5.  **Filling Pattern:** The interior of the hollow rectangles (originally white) is filled with a specific color using a checkerboard pattern.
6.  **Color Correspondence:** There's a rule linking the color of each hollow rectangle to the color used to fill its interior. This fill color comes from the set of colors of the scattered pixels found in the input.
7.  **Scattered Pixel Removal:** All the original scattered single pixels are removed in the output (turned white).
8.  **Rectangle Preservation:** The frames of the hollow rectangles themselves remain unchanged in the output.
9.  **Checkerboard Detail:** The checkerboard fill pattern seems to depend on the coordinates. Specifically, comparing the input and output, a pixel at (row `r`, column `c`) inside a rectangle is filled if the parity of `r + c` matches the parity of `r0 + c0`, where `(r0, c0)` are the coordinates of the top-left pixel *inside* the hollow rectangle.
10. **Color Pairing Rule:** Based on analyzing the three examples, the pairing between a rectangle's color and its fill color follows a specific rule: If you sort the distinct rectangle colors numerically (ascending) and sort the distinct scattered pixel colors numerically (ascending), the smallest rectangle color gets paired with the largest scattered color, and the largest rectangle color gets paired with the smallest scattered color. This pattern holds across the examples where there are two distinct rectangle colors and two distinct scattered colors.

**YAML Fact Documentation**


```yaml
---
task_description: "Fill the interior of hollow rectangles with a checkerboard pattern using colors derived from scattered pixels, then remove the scattered pixels."

elements:
  - element: grid
    description: "A 2D array of pixels with values 0-9 representing colors."
    properties:
      - background_color: 0 (white)
      - dimensions: variable (up to 30x30)

  - element: hollow_rectangle
    description: "A rectangular frame, one pixel thick, made of a single uniform color, enclosing only white pixels."
    properties:
      - frame_color: (integer 1-9)
      - location: (defined by bounding box)
      - interior: (region of white pixels enclosed by the frame)
    identification:
      - Find connected components of non-white pixels.
      - Check if a component forms a 1-pixel thick rectangular frame surrounding only white pixels.

  - element: scattered_pixel
    description: "A single non-white pixel whose 8 neighbouring cells are all white (0)."
    properties:
      - color: (integer 1-9)
      - location: (row, column)
    identification:
      - Check each non-white pixel.
      - If all 8 neighbours are white (0), it's a scattered pixel.

actions:
  - action: identify_objects
    description: "Locate all hollow_rectangles and scattered_pixels in the input grid."
    inputs:
      - input_grid
    outputs:
      - list_of_rectangles
      - list_of_scattered_pixels

  - action: determine_fill_colors
    description: "Establish a mapping between each rectangle's frame_color and the color used to fill its interior."
    inputs:
      - list_of_rectangles
      - list_of_scattered_pixels
    outputs:
      - color_map (frame_color -> fill_color)
    logic: |
      1. Get distinct frame_colors from rectangles.
      2. Get distinct colors from scattered_pixels.
      3. Sort both sets of colors numerically (ascending).
      4. Pair the i-th sorted frame_color with the (n-1-i)-th sorted scattered_color (where n is the number of distinct colors).

  - action: apply_checkerboard_fill
    description: "Fill the interior of each hollow_rectangle with the determined fill_color using a checkerboard pattern."
    inputs:
      - target_grid (initially copy of input_grid)
      - rectangle
      - fill_color
    outputs:
      - modified_target_grid
    logic: |
      1. Find the top-left coordinate (r0, c0) of the rectangle's interior (first white pixel inside).
      2. Calculate the target parity P = (r0 + c0) % 2.
      3. For each pixel (r, c) in the rectangle's interior:
      4. If (r + c) % 2 == P, set target_grid[r][c] = fill_color.

  - action: remove_scattered_pixels
    description: "Set the color of all original scattered_pixels in the grid to white (0)."
    inputs:
      - target_grid
      - list_of_scattered_pixels
    outputs:
      - modified_target_grid
    logic: |
      For each scattered_pixel at (r, c), set target_grid[r][c] = 0.

relationships:
  - relationship: fill_color_source
    description: "The colors used to fill the rectangles are sourced exclusively from the colors of the scattered pixels."
  - relationship: pairing_rule
    description: "The specific pairing between a rectangle's color and its fill color is determined by sorting both sets of colors and pairing smallest-frame-color with largest-scattered-color, etc."
  - relationship: checkerboard_anchor
    description: "The checkerboard pattern's alignment (which squares get filled) depends on the coordinates of the top-left interior pixel of the rectangle."

final_state:
  - property: "Output grid contains the original hollow rectangles."
  - property: "Interiors of hollow rectangles are filled with a checkerboard pattern according to the derived color map."
  - property: "All originally scattered pixels are removed (set to white)."
---
```


**Natural Language Program**

1.  **Initialization:** Create a copy of
