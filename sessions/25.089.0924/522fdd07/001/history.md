
## train_1

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 4 4 4
7 3 3 3 3 3 3 3 7 7 7 7 7 4 4 4
7 3 3 3 3 3 3 3 7 7 7 7 7 4 4 4
7 3 3 3 3 3 3 3 7 7 7 7 7 7 7 7
7 3 3 3 3 3 3 3 7 7 7 7 7 7 7 7
7 3 3 3 3 3 3 3 7 7 7 6 6 6 7 7
7 3 3 3 3 3 3 3 7 7 7 6 6 6 7 7
7 3 3 3 3 3 3 3 7 7 7 6 6 6 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 9 9 9
7 7 7 7 7 7 7 7 7 7 7 7 7 9 9 9
7 7 7 1 1 1 1 1 7 7 7 7 7 9 9 9
7 7 7 1 1 1 1 1 7 7 7 7 7 7 7 7
7 7 7 1 1 1 1 1 7 7 7 7 7 7 7 7
7 7 7 1 1 1 1 1 7 7 7 7 7 7 7 7
7 7 7 1 1 1 1 1 7 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 4 7
7 7 3 3 3 3 3 7 7 7 7 7 7 7 7 7
7 7 3 3 3 3 3 7 7 7 7 7 7 7 7 7
7 7 3 3 3 3 3 7 7 7 7 7 7 7 7 7
7 7 3 3 3 3 3 7 7 7 7 7 7 7 7 7
7 7 3 3 3 3 3 7 7 7 7 7 6 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 9 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 1 1 1 7 7 7 7 7 7 7 7 7
7 7 7 7 1 1 1 7 7 7 7 7 7 7 7 7
7 7 7 7 1 1 1 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


## train_2

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 9 9 9 9 9
7 7 7 7 7 7 7 7 7 7 7 9 9 9 9 9
7 7 7 7 7 7 7 7 7 7 7 9 9 9 9 9
7 7 7 7 7 7 7 7 7 7 7 9 9 9 9 9
7 7 7 7 7 7 7 7 7 7 7 9 9 9 9 9
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
6 6 6 6 6 6 6 6 6 7 0 0 0 7 7 7
6 6 6 6 6 6 6 6 6 7 0 0 0 7 7 7
6 6 6 6 6 6 6 6 6 7 0 0 0 7 7 7
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 9 9 9 7
7 7 7 7 7 7 7 7 7 7 7 7 9 9 9 7
7 7 7 7 7 7 7 7 7 7 7 7 9 9 9 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 0 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


## train_3

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
0 0 0 7 7 7 7 7 7 7 7 7 7 7 7 7
0 0 0 7 7 7 7 7 7 7 7 7 7 7 7 7
0 0 0 7 7 7 7 7 7 5 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 2 2 2 7 7 7 7 7 7 7 7 7 7 7 7
7 2 2 2 7 7 7 7 7 7 8 8 8 8 8 7
7 2 2 2 7 7 7 7 7 7 8 8 8 8 8 7
7 7 7 7 7 7 7 7 7 7 8 8 8 8 8 7
7 7 7 7 7 7 7 7 7 7 8 8 8 8 8 7
7 7 7 7 7 7 7 7 7 7 8 8 8 8 8 7
```


**output:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 0 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 5 5 5 5 5 5 5 5 5 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 2 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 8 8 8 7 7
7 7 7 7 7 7 7 7 7 7 7 8 8 8 7 7
7 7 7 7 7 7 7 7 7 7 7 8 8 8 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


## train_4

**input:**
```
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 5 5 5 7 7 7 7 7 7 7 7 7 7
7 7 7 5 5 5 7 7 7 7 7 1 7 7 7 7
7 7 7 5 5 5 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 8 8 8 8 8 7 7 7 7 7 7 7
7 7 7 7 8 8 8 8 8 7 7 7 7 7 7 7
7 7 7 7 8 8 8 8 8 7 7 7 2 2 2 7
7 7 7 7 8 8 8 8 8 7 7 7 2 2 2 7
7 7 7 7 8 8 8 8 8 7 7 7 2 2 2 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```


**output:**
```
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 5 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 1 1 1 1 1 1 1 1 1
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 8 8 8 7 7 7 7 7 7 7 7
7 7 7 7 7 8 8 8 7 7 7 7 7 7 7 7
7 7 7 7 7 8 8 8 7 7 7 7 7 2 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7
```

Okay, let's analyze the provided examples to understand the transformation rule.

**Perception of Task Elements:**

1.  **Grid Structure:** Both input and output are grids of pixels with different colors. The grids have a consistent background color, orange (7).
2.  **Objects:** The primary elements are contiguous blocks (objects) of pixels with colors other than the background orange (7). In the provided examples, these objects appear to be solid rectangles of various sizes and colors (Green, Yellow, Magenta, Maroon, Blue, White, Gray, Red, Azure).
3.  **Transformation:** The core transformation involves modifying these rectangular objects based on their initial size and whether a specific type of object exists.
4.  **Shrinking:** Most objects undergo a shrinking process. A larger rectangle in the input becomes a smaller rectangle in the output, effectively removing the outermost layer of pixels. A 3x3 rectangle shrinks to a single central pixel (1x1). Rectangles smaller than 3x3 in either dimension seem to disappear (or are not present in the examples such that they would persist after shrinking).
5.  **Expansion:** In some examples (train_3 and train_4), one specific object *expands* dramatically instead of shrinking. This expansion happens if and only if there is exactly one object in the input grid that consists of a single pixel (1x1). This single pixel expands into a large (9x9) solid square of the same color, centered on the original pixel's location.
6.  **Conditional Logic:** The overall transformation depends on the presence or absence of a single 1x1 object. If present, that object expands, and all others shrink. If absent, all objects shrink.
7.  **Background:** The background orange (7) pixels generally remain unchanged, except where they are overwritten by shrinking or expanding objects.

**YAML Fact Documentation:**


```yaml
task_context:
  grid_properties:
    - background_color: 7 (orange)
    - objects_are_contiguous_pixels: true
    - object_colors_varied: true
  input_features:
    - objects_are_solid_rectangles: true # Observation from examples
    - existence_of_1x1_object: key conditional factor
  output_features:
    - background_color_preserved: true (unless overwritten)
    - object_transformation_rule_applied: true
transformation_logic:
  condition:
    - check: count of 1x1 sized non-background objects in the input grid
    - equals: 1
      actions:
        - identify: the 1x1 object (color C, position R, P)
        - action_1:
            type: expand_object
            target: the 1x1 object
            details: replace with a 9x9 solid rectangle of color C, centered at (R, P) in the output
        - action_2:
            type: shrink_object
            target: all other non-background objects
            details: replace with an object reduced by 1 pixel on all sides (W-2 x H-2). 3x3 becomes 1x1. Smaller objects disappear.
    - not_equals: 1
      actions:
        - action_1:
            type: shrink_object
            target: all non-background objects
            details: replace with an object reduced by 1 pixel on all sides (W-2 x H-2). 3x3 becomes 1x1. Smaller objects disappear.
  object_processing:
    - find_connected_components: identify distinct objects by color
    - calculate_bounding_box: for each object
    - check_solid_rectangle: verify object fills its bounding box (implicit assumption)
    - calculate_size: width (W) and height (H) from bounding box
  shrink_rule:
    - input_object: W x H rectangle at (min_r, min_c) to (max_r, max_c)
    - condition: W >= 3 AND H >= 3
    - output_object: (W-2) x (H-2) rectangle of the same color at (min_r + 1, min_c + 1) to (max_r - 1, max_c - 1)
  expand_rule:
    - input_object: 1x1 pixel at (r, c) with color C
    - output_object: 9x9 rectangle of color C centered at (r, c), covering (r-4, c-4) to (r+4, c+4)
```


**Natural Language Program:**

1.  Initialize the output grid to be the same size as the input grid, filled entirely with the background color (orange, 7).
2.  Identify all distinct, contiguous objects in the input grid that are not the background color (orange, 7). For each object, determine its color, its pixels, and calculate its bounding box. (Assume these objects are solid rectangles based on examples).
3.  Count how many of these identified objects consist of exactly one pixel (size 1x1).
4.  **Case 1: If exactly one 1x1 object is found:**
    *   Identify the color (C) and position (row r, column c) of this single 1x1 object.
    *   In the output grid, draw a 9x9 solid rectangle of color C, centered at position (r, c). The top-left corner will be at (r-4, c-4) and the bottom-right at (r+4, c+4). (Ensure drawing stays within grid boundaries if necessary, though not required by examples).
    *   For every *other* object found in step 2 (which are not 1x1):
        *   Let the object's color be C_obj and its bounding box be from (min_r, min_c) to (max_r, max_c).
        *   Calculate the width W = max_c - min_c + 1 and height H = max_r - min_r + 1.
        *   If W is greater than or equal to 3 AND H is greater than or equal to 3:
            *   In the output grid, draw a solid rectangle of color C_obj from (min_r + 1, min_c + 1) to (max_r - 1, max_c - 1).
5.  **Case 2: If the number of 1x1 objects is not exactly one (i.e., zero or more than one):**
    *   For *every* object found in step 2:
        *   Let the object's color be C_obj and its bounding box be from (min_r, min_c) to (max_r, max_c).
        *   Calculate the width W = max_c - min_c + 1 and height H = max_r - min_r + 1.
        *   If W is greater than or equal to 3 AND H is greater than or equal to 3:
            *   In the output grid, draw a solid rectangle of color C_obj from (min_r + 1, min_c + 1) to (max_r - 1, max_c - 1).
6.  The final state of the output grid after performing these drawing operations is the result.
