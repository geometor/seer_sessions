
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 8 8 0 8 8 0 0
0 0 0 0 0 0 0 0 8 8 8 0 0 0
0 0 0 0 0 8 8 8 8 0 0 0 0 0
0 0 0 0 8 8 0 8 0 0 8 8 0 0
0 0 0 0 0 0 0 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 8 0 8 0 0 0
0 0 0 0 0 0 8 8 8 0 8 8 8 0
0 0 0 0 0 0 8 0 0 0 0 0 8 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 0 0 0 0 0 0 0 0 0 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 2 2 0 2 2 0 0
0 0 0 0 0 0 0 0 2 2 2 0 0 0
0 0 0 0 0 2 2 2 2 0 0 0 0 0
0 0 0 0 2 2 0 2 0 0 2 2 0 0
0 0 0 0 0 0 0 2 2 2 2 0 0 0
0 0 0 0 0 0 0 0 2 0 2 0 0 0
0 0 0 0 0 0 2 2 2 0 2 2 2 0
0 0 0 0 0 0 2 0 0 0 0 0 2 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 8 8 0 8 0 8 8 0 0 0
0 0 0 0 8 0 8 0 8 0 8 0 0 0
0 0 0 0 8 8 0 8 0 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 0 1 0 0 0 0 0 0 0 0
0 0 0 0 1 0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 3 3 0 3 0 3 3 0 0 0
0 0 0 0 3 0 3 0 3 0 3 0 0 0
0 0 0 0 3 3 0 3 0 3 3 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 8 0 0 0 8 0 0 0 0 0 0
0 8 0 8 0 8 0 8 0 8 0 0 0 0
0 8 8 8 8 8 8 8 8 8 0 0 0 0
0 8 0 8 0 8 0 8 0 8 0 0 0 0
0 8 0 0 0 8 0 0 0 8 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 0 1 1 1 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 2 0 0 0 2 0 0 0 0 0 0
0 2 0 2 0 2 0 2 0 2 0 0 0 0
0 2 2 2 2 2 2 2 2 2 0 0 0 0
0 2 0 2 0 2 0 2 0 2 0 0 0 0
0 2 0 0 0 2 0 0 0 2 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_4

**input:**
```
0 0 0 0 0 0 0 8 8 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 8 0 8 0
0 0 0 0 0 8 8 8 8 0 8 8 8 0
0 0 0 0 8 8 0 0 8 8 8 0 8 8
0 0 0 0 0 0 0 8 8 0 0 0 8 0
0 0 0 0 0 0 8 8 0 0 0 8 8 0
0 0 0 0 0 0 0 0 0 8 8 8 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 1 1 0 0 0 0 0 0 0
0 0 0 0 1 0 1 0 0 0 0 0 0 0
0 0 0 0 0 1 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 7 7 0 0 0 0 0
0 0 0 0 0 0 0 0 7 7 7 0 0 0
0 0 0 0 0 0 0 0 0 0 7 0 7 0
0 0 0 0 0 7 7 7 7 0 7 7 7 0
0 0 0 0 7 7 0 0 7 7 7 0 7 7
0 0 0 0 0 0 0 7 7 0 0 0 7 0
0 0 0 0 0 0 7 7 0 0 0 7 7 0
0 0 0 0 0 0 0 0 0 7 7 7 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_5

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 0 8 8 8 0 8 8 0 0 0
0 0 0 0 0 0 8 0 8 8 0 0 0 0
0 0 0 0 0 0 0 8 0 0 8 8 0 0
0 0 0 0 0 0 0 0 8 8 0 8 0 0
0 0 0 0 0 0 0 0 0 0 8 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 1 0 1 0 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0
0 0 1 1 1 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 0 0 0
0 0 0 0 0 3 3 3 0 3 3 0 0 0
0 0 0 0 0 0 3 0 3 3 0 0 0 0
0 0 0 0 0 0 0 3 0 0 3 3 0 0
0 0 0 0 0 0 0 0 3 3 0 3 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

**Perception of the Elements:**

The input grids contain two distinct non-background objects:
1.  A larger pattern composed of 'azure' (8) pixels, located generally in the upper or central part of the grid. The shape and position of this pattern vary across examples.
2.  A smaller pattern composed of 'blue' (1) pixels, located generally in the lower part of the grid. This blue pattern seems to take on specific simple shapes (like '+', 'T', 'L').

The output grids show the following transformations:
1.  The azure (8) pattern from the input has changed color, while retaining its original shape and position. The new color varies between examples (red (2), green (3), orange (7)).
2.  The blue (1) pattern from the input has disappeared, replaced by the background 'white' (0) color.
3.  The background 'white' (0) pixels remain unchanged.

The key observation is that the *shape* of the blue (1) pattern in the input determines the *color* that the azure (8) pattern transforms into in the output.

*   A blue '+' shape corresponds to the azure pixels becoming 'red' (2). (Examples 1, 3)
*   A blue rotated 'T' shape (looks like ã…—) corresponds to the azure pixels becoming 'green' (3). (Examples 2, 5)
*   A blue 'L' shape corresponds to the azure pixels becoming 'orange' (7). (Example 4)

**Facts:**


```yaml
task_description: Processes an input grid containing an azure pattern and a blue shape pattern, transforming the azure pattern's color based on the blue shape.

elements:
  - object: azure_pattern
    description: A configuration of azure (8) pixels. Its shape and position vary.
    properties:
      - color: azure (8)
      - role: target_object_for_color_change
  - object: blue_pattern
    description: A small configuration of blue (1) pixels, forming a distinct shape (e.g., '+', 'T', 'L').
    properties:
      - color: blue (1)
      - role: instruction_key_for_color_change
      - shape_determines_output_color: true
  - object: background
    description: The white (0) pixels forming the grid background.
    properties:
      - color: white (0)
      - role: static_background

transformations:
  - action: identify_blue_shape
    input: blue_pattern
    output: shape_category ('+', 'T', 'L', etc.)
    description: Determine the geometric shape formed by the contiguous blue (1) pixels.
  - action: map_shape_to_color
    input: shape_category (from identify_blue_shape)
    output: target_color (red (2), green (3), orange (7), etc.)
    description: >
      Establish a mapping rule:
      '+' shape maps to red (2).
      'T' shape (rotated 90 deg clockwise) maps to green (3).
      'L' shape maps to orange (7).
  - action: recolor_azure_pattern
    input: azure_pattern, target_color (from map_shape_to_color)
    output: modified_azure_pattern
    description: Replace all azure (8) pixels with the determined target_color. The shape and position remain the same.
  - action: remove_blue_pattern
    input: blue_pattern
    output: modified_grid_area
    description: Replace all blue (1) pixels with the background color (white (0)).

output_grid_composition:
  - The modified_azure_pattern (recolored).
  - The background pixels.
  - The areas previously occupied by the blue_pattern, now filled with background color.
```


**Natural Language Program:**

1.  Initialize the output grid as a copy of the input grid.
2.  Identify the connected component of blue (1) pixels in the input grid and determine its characteristic shape (e.g., '+', 'T', 'L').
3.  Based on the identified blue shape, determine the target color for the transformation:
    *   If the shape is '+', the target color is red (2).
    *   If the shape is a 'T' rotated 90 degrees clockwise, the target color is green (3).
    *   If the shape is 'L', the target color is orange (7).
4.  Iterate through each pixel of the input grid:
    *   If the pixel color is azure (8), change its color in the output grid to the determined target color.
    *   If the pixel color is blue (1), change its color in the output grid to white (0).
    *   Otherwise (if the pixel is white (0)), keep its color the same in the output grid.
5.  Return the modified output grid.
