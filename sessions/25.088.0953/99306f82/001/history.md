
## train_1

**input:**
```
3 0 0 0 0 0 0 0 0 0
0 2 0 0 0 0 0 0 0 0
0 0 1 1 1 1 1 1 0 0
0 0 1 0 0 0 0 1 0 0
0 0 1 0 0 0 0 1 0 0
0 0 1 0 0 0 0 1 0 0
0 0 1 0 0 0 0 1 0 0
0 0 1 1 1 1 1 1 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
3 0 0 0 0 0 0 0 0 0
0 2 0 0 0 0 0 0 0 0
0 0 1 1 1 1 1 1 0 0
0 0 1 3 3 3 3 1 0 0
0 0 1 3 2 2 3 1 0 0
0 0 1 3 2 2 3 1 0 0
0 0 1 3 3 3 3 1 0 0
0 0 1 1 1 1 1 1 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
2 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 1 1 1 1 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 0 0 0 0 0 0 0 1 0 0 0
0 0 0 1 1 1 1 1 1 1 1 1 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
2 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 1 1 1 1 1 0 0 0
0 0 0 1 2 2 2 2 2 2 2 1 0 0 0
0 0 0 1 2 6 6 6 6 6 2 1 0 0 0
0 0 0 1 2 6 4 4 4 6 2 1 0 0 0
0 0 0 1 2 6 4 4 4 6 2 1 0 0 0
0 0 0 1 2 6 4 4 4 6 2 1 0 0 0
0 0 0 1 2 6 6 6 6 6 2 1 0 0 0
0 0 0 1 2 2 2 2 2 2 2 1 0 0 0
0 0 0 1 1 1 1 1 1 1 1 1 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
8 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 0 0 0 0 0 0 0 0 1 0
0 0 0 0 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 6 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 2 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 1 8 8 8 8 8 8 8 8 1 0
0 0 0 0 1 8 6 6 6 6 6 6 8 1 0
0 0 0 0 1 8 6 4 4 4 4 6 8 1 0
0 0 0 0 1 8 6 4 2 2 4 6 8 1 0
0 0 0 0 1 8 6 4 2 2 4 6 8 1 0
0 0 0 0 1 8 6 4 4 4 4 6 8 1 0
0 0 0 0 1 8 6 6 6 6 6 6 8 1 0
0 0 0 0 1 8 8 8 8 8 8 8 8 1 0
0 0 0 0 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

Okay, let's break down this task.

**Perception of Elements:**

1.  **Input Grid Structure:** Each input grid contains a prominent rectangular frame made of blue pixels (color 1). Inside this frame is an area filled with white pixels (color 0). Outside the frame, typically in the top-left corner region, there are isolated, non-white pixels. The rest of the grid is filled with white pixels.
2.  **Output Grid Structure:** The output grid largely mirrors the input grid, but the white area inside the blue frame is filled with colors. The blue frame itself and the pixels outside the frame remain unchanged.
3.  **Color Filling:** The filling pattern within the frame follows concentric layers, moving inwards from the blue boundary.
4.  **Color Source:** The colors used for filling originate from the isolated, non-white pixels found outside the blue frame in the input grid. Specifically, pixels located at diagonal positions `(d, d)` (where `d` starts from 0) seem to determine the colors.
5.  **Relationship:** There's a direct mapping between the position of the external "key" pixels and the layer they color inside the frame. The key pixel at `(0, 0)` determines the color for the layer immediately inside the blue frame. The key pixel at `(1, 1)` determines the color for the next layer inwards, and so on.
6.  **Distance Metric:** The layers inside the frame can be defined by their minimum distance to the surrounding blue frame boundary. A pixel's distance `dist` is `min(row_distance_to_top_frame, row_distance_to_bottom_frame, col_distance_to_left_frame, col_distance_to_right_frame)`. The layer with `dist = 1` is colored by the key pixel at `(0, 0)`, the layer with `dist = 2` is colored by the key pixel at `(1, 1)`, and generally, the layer with distance `dist` is colored by the key pixel at `(dist-1, dist-1)`.

**YAML Facts:**


```yaml
task_description: Fill the white area inside a blue rectangular frame with concentric colored layers, where the colors and order are determined by key pixels located outside the frame along the main diagonal starting from the top-left corner.

elements:
  - object: frame
    type: rectangle
    color: blue (1)
    location: variable, defines an inner region
  - object: inner_area
    type: region
    color: white (0) initially
    location: enclosed by the blue frame
    transformation: filled with concentric colored layers
  - object: key_pixels
    type: isolated pixels
    color: various (non-white, non-blue)
    location: outside the frame, specifically at coordinates (d, d) for d >= 0
    role: determine the fill colors for the inner_area layers

relationships:
  - type: spatial
    description: The inner_area is completely enclosed by the frame.
  - type: dependency
    description: The color of each concentric layer within the inner_area depends on a specific key_pixel.
  - type: mapping
    description: The key_pixel at input coordinates (d, d) determines the color for the layer inside the frame at minimum distance (d+1) from the frame boundary.

properties:
  - property: concentric_layers
    applies_to: inner_area in output
    description: Layers are defined by the minimum distance of a pixel to the surrounding frame boundary.
  - property: distance_metric
    value: min(row - top_frame_row, bottom_frame_row - row, col - left_frame_col, right_frame_col - col)
    description: Defines the layer index for pixels within the inner_area.

actions:
  - action: identify_frame
    input: grid
    output: coordinates of the blue rectangle boundary
  - action: identify_key_pixels
    input: grid
    output: list of colors and their (d, d) coordinates outside the frame
  - action: calculate_distance
    input: pixel coordinates (r, c) within the inner_area, frame coordinates
    output: minimum distance `dist` to the frame boundary
  - action: determine_fill_color
    input: distance `dist`, key_pixels list
    output: color corresponding to the key pixel at index (dist-1, dist-1)
  - action: fill_pixel
    input: pixel coordinates (r, c), fill_color
    output: modified grid with the pixel at (r, c) changed to fill_color

sequence:
  1. Locate the blue frame boundaries.
  2. Identify all key pixels at coordinates (d, d) outside the frame and store their colors.
  3. Iterate through each pixel (r, c) within the bounds defined by the frame (excluding the frame itself).
  4. If the pixel (r, c) is white:
     a. Calculate its minimum distance `dist` to the frame boundary.
     b. Retrieve the color from the key pixel located at `(dist-1, dist-1)`.
     c. Change the color of the pixel (r, c) in the output grid to this retrieved color.
  5. Keep all other pixels (frame, key pixels, external white pixels) unchanged from the input.
```


**Natural Language Program:**

1.  **Find the Frame:** Locate the bounding box of the rectangular frame made of blue (1) pixels. Record its minimum and maximum row and column indices (`frame_r_min`, `frame_c_min`, `frame_r_max`, `frame_c_max`).
2.  **Find Key Colors:** Create a list or map to store the colors of the "key" pixels found at diagonal coordinates `(d, d)` in the input grid, starting from `d=0`, for as long as these coordinates are valid within the grid dimensions and are outside the identified blue frame. Store the color found at `(d, d)` associated with the index `d`.
3.  **Initialize Output:** Create a copy of the input grid to serve as the basis for the output grid.
4.  **Fill Inner Area:** Iterate through each pixel `(r, c)` within the region strictly inside the blue frame (i.e., `frame_r_min < r < frame_r_max` and `frame_c_min < c < frame_c_max`).
5.  **Check if Fillable:** For each such pixel `(r, c)`, check if its color in the input grid is white (0).
6.  **Calculate Distance:** If the pixel is white, calculate its minimum distance `dist` to the blue frame boundary: `dist = min(r - frame_r_min, frame_r_max - r, c - frame_c_min, frame_c_max - c)`.
7.  **Determine Fill Color:** Use the calculated distance `dist` to find the appropriate key color. The color is the one associated with index `d = dist - 1` found in step 2.
8.  **Apply Color:** Change the color of the pixel `(r, c)` in the output grid to the determined fill color.
9.  **Final Output:** The modified grid after iterating through all pixels inside the frame is the final output. Pixels belonging to the frame or located outside the frame remain unchanged from the input.
