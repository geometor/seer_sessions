
## train_1

**input:**
```
8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
8 6 4 3 4 7 3 8 3 7
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 3 0 0 3 0 3 0
0 0 0 3 0 0 3 0 3 0
0 0 0 3 0 0 3 0 3 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
8 6 4 3 4 7 3 8 3 7
0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
8 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
6 6 4 6 2 1 9 2 9 4
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
6 6 4 6 2 1 9 2 9 4
0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
4 1 4 4 6 3 1 6 3 6
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 8 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
4 0 4 4 6 0 0 6 0 6
4 0 4 4 6 0 0 6 0 6
4 0 4 4 6 0 0 6 0 6
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
4 1 4 4 6 3 1 6 3 6
0 0 0 0 0 0 0 0 0 0
```


## train_4

**input:**
```
8 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
2 3 3 2 3 1 1 3 1 1
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
2 0 0 2 0 0 0 0 0 0
2 0 0 2 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
2 3 3 2 3 1 1 3 1 1
0 0 0 0 0 0 0 0 0 0
```


## train_5

**input:**
```
8 8 8 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
2 1 2 1 2 1 1 2 2 2
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 8 8 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 1 0 1 0 1 1 0 0 0
0 1 0 1 0 1 1 0 0 0
0 1 0 1 0 1 1 0 0 0
0 1 0 1 0 1 1 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
2 1 2 1 2 1 1 2 2 2
0 0 0 0 0 0 0 0 0 0
```


## train_6

**input:**
```
8 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
1 3 1 1 1 1 4 1 1 1
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
8 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 3 0 0 0 0 4 0 0 0
5 5 5 5 5 5 5 5 5 5
0 0 0 0 0 0 0 0 0 0
1 3 1 1 1 1 4 1 1 1
0 0 0 0 0 0 0 0 0 0
```

*   **Perception:** The task involves modifying a grid based on information encoded in specific rows. The input grid typically contains a top row with some azure (8) pixels, a solid horizontal line of gray (5) pixels somewhere below the middle, and a row near the bottom containing a sequence of various colors. The output grid retains most of the input structure but adds vertical colored lines in the space above the gray line. The color and column position of these new lines are determined by the color sequence row near the bottom. The height of these new lines is determined by the count of azure pixels in the top row.

*   **YAML:**
    
```yaml
    task_elements:
      - element: Grid
        description: A 2D array of colored pixels (0-9).
      - element: Control Rows
        description: Specific rows containing information that dictates the transformation.
        properties:
          - name: Height Control Row
            location: The first row (row 0).
            content: Contains azure (8) pixels and white (0) pixels.
            role: The count of azure pixels determines the height of the output lines.
          - name: Anchor Row
            location: The first row from the top consisting entirely of gray (5) pixels.
            role: Acts as the baseline below the drawn lines.
          - name: Source Color Row
            location: The last row containing non-white (0) pixels (often row 8 in examples).
            role: The color and column position of non-white pixels in this row determine the color and column of the lines to be drawn.
      - element: Output Lines
        description: Vertical lines added to the output grid.
        properties:
          - color: Determined by the corresponding color in the Source Color Row.
          - column: Determined by the column position of the corresponding color in the Source Color Row.
          - height: Determined by the count of azure (8) pixels in the Height Control Row.
          - vertical_position: Drawn in the rows immediately above the Anchor Row, extending upwards for the determined height.
    transformation:
      - action: Identify Rows
        description: Locate the Height Control Row (row 0), the Anchor Row (first all-gray row), and the Source Color Row (last non-white row).
      - action: Calculate Height
        description: Count the number of azure (8) pixels in the Height Control Row. Let this be H.
      - action: Iterate Columns
        description: For each column index 'c' from 0 to width-1:
          - step: Get Source Color
            description: Read the color 'C' at position (Source Color Row index, c).
          - step: Check Condition
            description: If 'C' is not white (0):
              - step: Draw Line
                description: In the output grid, set the color of pixels in column 'c' from row (Anchor Row index - 1) down to row (Anchor Row index - H) to color 'C'.
      - action: Copy Unchanged
        description: All pixels not part of the newly drawn lines retain their original color from the input grid.

    ```


*   **Natural Language Program:**
    1.  Identify the first row (row 0) as the 'Height Control Row'.
    2.  Count the number of azure (8) pixels in the Height Control Row. Let this count be `H`.
    3.  Identify the first row from the top that consists entirely of gray (5) pixels. Let its row index be `R_anchor`.
    4.  Identify the last row in the grid that contains at least one non-white (0) pixel. Let its row index be `R_source`.
    5.  Create a copy of the input grid to serve as the initial output grid.
    6.  Iterate through each column index `c` from 0 to the width of the grid minus 1.
    7.  Get the color `C` from the input grid at `(R_source, c)`.
    8.  If the color `C` is not white (0):
        a.  Iterate through the row indices `r` from `R_anchor - 1` down to `R_anchor - H`.
        b.  Set the pixel color in the output grid at `(r, c)` to `C`.
    9.  The final modified grid is the result.
