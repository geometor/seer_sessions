facts:
  - task: Draw a shape centered on a specific pixel, with conditional modifications.
  - grid_dimensions: Consistent between input and output for each example (11x11).
  - objects:
      - input_grid: The initial state. Contains a background color (white=0) and potentially other colored pixels (red=2) and always exactly one anchor pixel (green=3).
      - output_grid: The final state. Derived from the input grid.
      - anchor_pixel: A single green (3) pixel in the input grid. Its location determines the center for drawing.
      - pattern: A fixed 9x9 grid representing the digit '3', composed of green (3) and white (0) pixels. The pattern's implicit center aligns with the anchor_pixel.
      - background_pixel: White (0) pixels in the input grid.
      - foreground_pixels: Non-white (non-0) pixels in the input grid, including the anchor_pixel and potentially others (e.g., red=2).
  - actions:
      - find: Locate the coordinates (R, C) of the anchor_pixel (green=3) in the input_grid.
      - copy_preserve: Initialize the output_grid as a copy of the input_grid. During pattern application, if the pattern pixel is white(0), the original input pixel value is kept. If the pattern pixel is green(3) but the corresponding input pixel is non-white, the original input pixel value is kept.
      - draw_conditional: Iterate through the 9x9 pattern relative to the anchor_pixel's location (R, C). If a pattern pixel is green (3) *and* the corresponding pixel in the *input_grid* at the target location is white (0), set the output_grid pixel at that location to green (3).
      - count: Determine the total number of non-white pixels in the *input_grid*.
      - conditional_fill_last_row: If the count of non-white pixels in the input_grid is exactly 1, set all pixels in the last row of the *output_grid* to green (3).
  - constraints:
      - The pattern is only drawn onto background pixels (white=0) of the input grid.
      - Original non-white pixels within the pattern area are preserved.
      - The last row fill is conditional based on the input grid's content.