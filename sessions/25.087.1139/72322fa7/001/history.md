
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 4 8 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 8 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
4 0 4 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 8 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 4 8 4 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 4 8 4
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
4 8 4 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 8 4 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 8 6 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 6 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 0
0 0 3 0 0 0 0 0 0 6 0 0 0 0 0 8 0 8 0 0 0 0
0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0
0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 8 6 8 0 0 0 0 0 0 0 0 0 0 0 8 0 0
0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 8 6 8 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 0 1 0 0 0 0 0 8 0 0 0 0 0 0 8 0 0 0 0 0
0 0 3 0 0 0 0 0 8 6 8 0 0 0 0 8 6 8 0 0 0 0
0 1 0 1 0 0 0 0 0 8 0 0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 2 8 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 8 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 2 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 2 8 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 2 8 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 8 2 8 0 0 0 0 0 1 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0
```

*   **Perception:** The task involves identifying specific small patterns ("source patterns") within the input grid and copying them to designated locations ("target markers"). The output grid starts as a copy of the input, and then these source patterns overwrite specific areas based on the markers found.

*   **Source Patterns:** These are recurring motifs, often symmetric, containing a central colored pixel (not white) and associated structural pixels. Examples observed:
    *   `4 8 4` horizontal (yellow-azure-yellow)
    *   `1 3 1` vertical (blue-green-blue)
    *   `8 6 8` plus shape (azure-magenta-azure central cross)
    *   `8 2 8` horizontal (azure-red-azure)
*   **Target Markers:** These indicate where the source patterns should be placed. Two types of markers are observed:
    *   **Isolated Pixels:** A single pixel of color `C`, where `C` matches the central color of a source pattern (e.g., isolated green '3' targets the `1 3 1` pattern).
    *   **Placeholder Patterns:** A pattern `X 0 X` (horizontal or vertical, with `X` pixels directly adjacent to the central white '0'), where `X` matches the structural/flanking color of a source pattern (e.g., `8 0 8` targets the pattern associated with azure '8', which could be `8 6 8` or `8 2 8` depending on what's defined elsewhere in the input).
*   **Transformation:** The core transformation involves finding source patterns and target markers. For each target marker found, the corresponding source pattern is identified (based on matching central color `C` for isolated markers, or matching flanking color `X` for `X 0 X` markers) and then copied (stamped) onto the output grid, centered over the target marker's location. The original source patterns remain in their positions unless overwritten by another pattern being stamped.

*   **YAML Facts:**
    
```yaml
    task_description: Copy identified source patterns to locations marked by specific isolated pixels or placeholder patterns.

    elements:
      - element: grid
        description: A 2D array of pixels with colors 0-9.
      - element: pattern
        description: A small, contiguous arrangement of non-white pixels.
      - element: source_pattern
        description: A specific pattern identified in the input grid that will be copied. Characterized by a central color (C) and structural/flanking colors (X).
        examples:
          - '4 8 4' (C=8, X=4)
          - '1 3 1' vertical (C=3, X=1)
          - '8 6 8' plus shape (C=6, X=8)
          - '8 2 8' horizontal (C=2, X=8)
      - element: target_marker
        description: Indicates the destination location for copying a source pattern.
        types:
          - type: isolated_pixel
            description: A single non-white pixel C whose color matches the central color of a source pattern.
            example: isolated green(3) pixel.
          - type: placeholder_pattern
            description: A pattern X 0 X (horizontal or vertical adjacency) where X matches the structural/flanking color of a source pattern.
            example: '8 0 8' horizontal.
      - element: location
        description: The coordinates (row, column) of a pixel or the center of a pattern/marker.

    relationships:
      - relationship: corresponds_to
        description: A target marker corresponds to a specific source pattern based on color matching.
        conditions:
          - Isolated pixel marker C corresponds to source pattern with central color C.
          - Placeholder pattern marker X 0 X corresponds to source pattern with structural/flanking color X.

    actions:
      - action: identify
        actor: agent
        object: source_patterns
        condition: Scan input grid for predefined pattern structures.
      - action: identify
        actor: agent
        object: target_markers
        condition: Scan input grid for isolated pixels C or placeholder patterns X 0 X matching source pattern colors.
      - action: copy_paste
        actor: agent
        source: source_pattern
        destination: location of corresponding target_marker
        effect: Overwrites pixels on the output grid with the source pattern, centered on the marker location.
      - action: initialize
        actor: agent
        object: output_grid
        condition: Create a copy of the input grid before applying transformations.

    ```


*   **Natural Language Program:**
    1.  Initialize the output grid as an identical copy of the input grid.
    2.  Identify all distinct "source patterns" present in the input grid. A source pattern is a small, recognizable motif like `X C X` (horizontal or vertical) or a plus shape centered on `C` with arms `X`, where `C` and `X` are non-white colors. Note the central color `C` and the structural/flanking color `X` for each source pattern.
    3.  Identify all "target markers" in the input grid. A target marker is either:
        a.  An isolated single pixel of color `C`, where `C` matches the central color of at least one identified source pattern.
        b.  A three-pixel sequence `X 0 X` (either horizontal `[X, 0, X]` or vertical `[[X], [0], [X]]`), where `X` matches the structural/flanking color of at least one identified source pattern.
    4.  For each identified target marker:
        a.  Determine the corresponding source pattern:
            i.  If the marker is an isolated pixel `C`, select the source pattern whose central color is `C`.
            ii. If the marker is `X 0 X`, select the source pattern whose structural/flanking color is `X`. (Assume only one such source pattern exists for each `C` or `X` in a given input).
        b.  Determine the center location of the target marker (the position of the isolated pixel `C` or the central `0` in `X 0 X`).
        c.  Copy the selected source pattern onto the output grid, centering the pattern at the determined target marker location. Overwrite any existing pixels at the destination.
    5.  Return the modified output grid.
