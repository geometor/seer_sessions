
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0
0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0
0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 2 2 2 2 0 0 0 0 0 0 0 0 0
0 0 0 2 0 0 2 0 0 0 0 0 0 0 0 0
0 0 0 2 0 0 2 0 0 0 0 0 0 0 0 0
0 0 0 2 2 2 2 0 0 0 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 4 4 4 4 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
1 1 1 1
1 0 0 1
1 0 0 1
1 1 1 1
2 2 2 2
2 0 0 2
2 0 0 2
2 2 2 2
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0
0 2 0 0 2 0 0 0 0 4 4 4 4 0 0 0 0
0 2 0 0 2 0 0 0 0 4 0 0 4 0 0 0 0
0 2 2 2 2 0 0 0 0 4 0 0 4 0 0 0 0
0 0 0 0 0 0 0 0 0 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
2 2 2 2 4 4 4 4
2 0 0 2 4 0 0 4
2 0 0 2 4 0 0 4
2 2 2 2 4 4 4 4
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0
0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0
0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0
0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 8 8 8 8 0 0
0 1 1 1 1 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 6 6 6 6 0 0 0 0 0 0
0 0 4 4 4 4 0 0 0 0 0 0 6 6 6 6 0 0 2 2 2 2
0 0 4 0 0 4 0 0 0 0 0 0 6 6 6 6 0 0 2 0 0 2
0 0 4 0 0 4 0 0 0 0 0 0 6 6 6 6 0 0 2 0 0 2
0 0 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
4 4 4 4 3 3 3 3 2 2 2 2
4 0 0 4 3 0 0 3 2 0 0 2
4 0 0 4 3 0 0 3 2 0 0 2
4 4 4 4 3 3 3 3 2 2 2 2
```

*   **Perception of Task Elements:**
    *   The input grids contain multiple, distinct 4x4 patterns (objects) scattered across a larger grid predominantly filled with white pixels (0).
    *   These 4x4 objects come in two main types:
        *   **Solid Squares:** A 4x4 block filled entirely with a single non-white color.
        *   **Hollow Squares:** A 4x4 block where the 1-pixel border is a single non-white color, and the inner 2x2 area is white (0).
    *   The output grid consists only of the "hollow square" objects found in the input.
    *   The selected hollow squares are arranged horizontally adjacent to each other in the output grid.
    *   The order of the hollow squares in the output appears to be determined by their vertical position (top-to-bottom) in the input grid. If two start on the same row, their left-to-right order is preserved.

*   **YAML Facts:**
    
```yaml
    task_description: Filter and horizontally concatenate specific 4x4 patterns from the input grid.

    elements:
      - element: grid
        description: A 2D array of pixels with color values 0-9.
      - element: background
        value: 0
        color: white
        role: Separates objects.
      - element: object
        description: A contiguous block of non-background pixels. In this task, relevant objects form distinct 4x4 patterns.
        properties:
          - shape: 4x4 grid
          - pattern_type:
              - solid_square: A 4x4 area filled with a single non-white color.
              - hollow_square: A 4x4 area with a 1-pixel border of a single non-white color and a 2x2 white center.
          - color: The non-white color used in the object (blue, red, green, yellow, azure, magenta observed).
          - position: Top-left coordinate (row, column) within the input grid.

    actions:
      - action: identify_objects
        description: Locate all distinct non-white objects in the input grid. Determine their bounding box and pattern.
      - action: filter_objects
        description: Select only the objects that are 4x4 hollow squares.
        criteria:
          - shape must be 4x4.
          - pattern must be a hollow square (non-white border, white center).
      - action: sort_objects
        description: Arrange the selected hollow squares based on their position in the input grid.
        criteria:
          - Primary sort key: Top-left row coordinate (ascending).
          - Secondary sort key: Top-left column coordinate (ascending).
      - action: construct_output
        description: Create the output grid by placing the sorted hollow squares horizontally adjacent to each other.
        details:
          - Output grid height is 4.
          - Output grid width is 4 times the number of selected objects.
          - Objects are placed left-to-right in their sorted order.

    relationships:
      - relationship: selection
        description: Only hollow square objects from the input are present in the output. Solid squares are discarded.
      - relationship: ordering
        description: The horizontal order of objects in the output corresponds to their top-to-bottom (then left-to-right) order in the input.
      - relationship: composition
        description: The output grid is composed by concatenating the selected, sorted objects horizontally.
    ```


*   **Natural Language Program:**
    1.  Scan the input grid to identify all distinct connected components (objects) made of non-white pixels.
    2.  For each identified object, determine its bounding box.
    3.  Filter these objects, keeping only those that meet the following criteria:
        a.  The bounding box dimensions are exactly 4x4.
        b.  The pattern within the 4x4 bounding box represents a "hollow square": the 1-pixel border consists of a single non-white color, and the central 2x2 area consists of white pixels (color 0).
    4.  Record the 4x4 pixel data and the original top-left row and column index for each qualifying hollow square object.
    5.  Sort the identified hollow square objects based primarily on their original top-left row index (ascending order). If two objects share the same row index, sort them secondarily by their original top-left column index (ascending order).
    6.  Create a new output grid with a height of 4 and a width equal to 4 multiplied by the number of sorted hollow squares.
    7.  Iterate through the sorted hollow square objects. For each object at index `i` (starting from 0) in the sorted list, copy its 4x4 pixel data into the output grid, placing its top-left corner at row 0, column `i * 4`.
    8.  Return the constructed output grid.
