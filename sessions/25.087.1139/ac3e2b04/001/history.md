
## train_1

**input:**
```
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 3 2 3 0 0 0 0 0 0
0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 3 3 3 0 0 0 0 0 0
1 1 1 3 2 3 1 1 1 1 1 1
0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
0 0 0 0 2 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 2 0 0 0 0 0 2 0 0
0 0 3 3 3 0 0 0 0 2 0 0
0 0 3 2 3 0 0 0 0 2 0 0
0 0 3 3 3 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 3 3 3 0
0 0 0 2 0 0 0 0 3 2 3 0
0 0 0 2 0 0 0 0 3 3 3 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
```


**output:**
```
0 0 0 2 0 0 0 0 0 2 0 0
0 0 3 3 3 0 0 0 1 1 1 0
1 1 3 2 3 1 1 1 1 2 1 1
0 0 3 3 3 0 0 0 1 1 1 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 1 1 1 0 0 0 3 3 3 0
1 1 1 2 1 1 1 1 3 2 3 1
0 0 1 1 1 0 0 0 3 3 3 0
0 0 0 2 0 0 0 0 0 2 0 0
0 0 0 2 0 0 0 0 0 2 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 0 0 0 0 0 0 0 0
2 2 2 3 2 3 2 2 2 2 2 2 2 2
0 0 0 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 2 2 2 2 2 2 2 2 2 2 2
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 3 3 0 0
2 2 2 2 2 2 2 2 2 3 2 3 2 2
0 0 0 0 0 0 0 0 0 3 3 3 0 0
```


**output:**
```
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 3 3 3 0 0 0 1 1 1 0 0
2 2 2 3 2 3 2 2 2 1 2 1 2 2
0 0 0 3 3 3 0 0 0 1 1 1 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 1 1 1 0 0 0 1 1 1 0 0
2 2 2 1 2 1 2 2 2 1 2 1 2 2
0 0 0 1 1 1 0 0 0 1 1 1 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 0 1 0 0 0 0 0 1 0 0 0
0 0 0 1 1 1 0 0 0 3 3 3 0 0
2 2 2 1 2 1 2 2 2 3 2 3 2 2
0 0 0 1 1 1 0 0 0 3 3 3 0 0
```


## train_4

**input:**
```
0 0 0 0 3 3 3 0 0 0
2 2 2 2 3 2 3 2 2 2
0 0 0 0 3 3 3 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
2 2 2 2 2 2 2 2 2 2
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 3 3 3 0 0 0
2 2 2 2 3 2 3 2 2 2
0 0 0 0 3 3 3 0 0 0
0 0 0 0 0 1 0 0 0 0
0 0 0 0 0 1 0 0 0 0
0 0 0 0 1 1 1 0 0 0
2 2 2 2 1 2 1 2 2 2
0 0 0 0 1 1 1 0 0 0
0 0 0 0 0 1 0 0 0 0
0 0 0 0 0 1 0 0 0 0
```

**Perception**

1.  **Input Grid Structure:** The input grids contain a white (0) background, vertical red (2) lines, and distinct green (3) cross-like shapes with a red (2) center pixel. These shapes have the structure:
    
```
      . 3 .
      3 2 3
      . 3 .
    ```

    Sometimes, horizontal red (2) lines are also present, intersecting the green crosses or appearing independently.

2.  **Output Grid Structure:** The output grids are identical to the input grids, except for the addition of blue (1) pixels.

3.  **Transformation Pattern:** The blue pixels are added based on the location of the red center pixel(s) of the green cross shape(s).
    *   For each green cross identified in the input, locate its central red (2) pixel.
    *   Draw a horizontal line of blue (1) pixels in the same row as the central red pixel.
    *   Draw a vertical line of blue (1) pixels in the same column as the central red pixel.
    *   These blue lines replace only the white (0) background pixels. They extend from the central pixel outwards towards the grid boundaries, stopping if they encounter any non-white pixel from the original input grid. The central red pixel itself is *not* changed to blue.

4.  **Key Elements:** The crucial element triggering the transformation is the specific 3x3 pattern of a green cross with a red center. The coordinates of this red center dictate where the blue lines are drawn. Other red lines or shapes do not trigger the addition of blue pixels.

**Facts**


```yaml
objects:
  - type: grid
    description: The main canvas for the task, containing pixels of different colors.
  - type: background
    color: white (0)
    description: The default pixel color.
  - type: pattern
    name: green_cross_red_center
    description: A 3x3 pattern consisting of green (3) pixels forming a cross shape around a central red (2) pixel.
      structure:
        - [ignore, green, ignore]
        - [green, red, green]
        - [ignore, green, ignore]
    properties:
      - center_coordinate: The (row, column) index of the central red pixel.
  - type: line
    color: red (2)
    description: Can be vertical or horizontal lines of red pixels. Their presence doesn't directly trigger the main transformation but they can be overwritten by the output blue lines if they fall on the path.
  - type: line
    color: blue (1)
    description: These pixels are added in the output grid.

actions:
  - identify: Locate all instances of the 'green_cross_red_center' pattern in the input grid.
  - determine_coordinates: For each identified pattern, record the row and column index of its central red pixel.
  - draw_lines: For each recorded coordinate (center_row, center_col):
      - Draw a horizontal blue line along center_row.
      - Draw a vertical blue line along center_col.
  - constraint: When drawing blue lines, only replace white (0) pixels. Stop drawing outwards from the center if a non-white pixel from the input grid is encountered. The central red pixel of the pattern is not replaced.

relationships:
  - trigger: The presence and location of the 'green_cross_red_center' pattern triggers the drawing of blue lines.
  - spatial: The blue lines originate from the center coordinates of the pattern and extend horizontally and vertically.
  - replacement: Blue pixels replace only white background pixels along the designated rows and columns.
```


**Natural Language Program**

1.  Create a copy of the input grid to serve as the output grid.
2.  Iterate through each pixel of the input grid to find potential centers of the "green cross with red center" pattern. A potential center is a red (2) pixel.
3.  For each red (2) pixel at `(row, col)`, check its immediate orthogonal neighbors (up, down, left, right). If all four neighbors are green (3), then this red pixel is the center of the target pattern.
4.  For each confirmed center at `(row, col)`:
    a.  **Draw Horizontal Blue Line:**
        i.  Starting from `col - 1` and moving left towards column 0: For each position `(row, c)`, if the pixel in the input grid is white (0), change the pixel at `(row, c)` in the output grid to blue (1). Stop if a non-white pixel is encountered in the input grid or the edge of the grid is reached.
        ii. Starting from `col + 1` and moving right towards the last column: For each position `(row, c)`, if the pixel in the input grid is white (0), change the pixel at `(row, c)` in the output grid to blue (1). Stop if a non-white pixel is encountered in the input grid or the edge of the grid is reached.
    b.  **Draw Vertical Blue Line:**
        i.  Starting from `row - 1` and moving up towards row 0: For each position `(r, col)`, if the pixel in the input grid is white (0), change the pixel at `(r, col)` in the output grid to blue (1). Stop if a non-white pixel is encountered in the input grid or the edge of the grid is reached.
        ii. Starting from `row + 1` and moving down towards the last row: For each position `(r, col)`, if the pixel in the input grid is white (0), change the pixel at `(r, col)` in the output grid to blue (1). Stop if a non-white pixel is encountered in the input grid or the edge of the grid is reached.
5.  Return the modified output grid.
