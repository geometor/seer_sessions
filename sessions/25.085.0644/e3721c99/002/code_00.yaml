facts:
  - grid:
      - Input and output grids have the same dimensions in all examples.
      - Grids are separated into an upper and lower section by a solid horizontal blue line (color 1).
  - objects_above_separator:
      - Located in the input grid, strictly above the blue line.
      - Are contiguous shapes of a single, non-white color (colors 2-9).
      - These act as 'key' shapes or templates.
      - Properties: color, shape (relative pixel coordinates), position (bounding box, top-left corner).
  - objects_below_separator:
      - Located in the input grid, strictly below the blue line.
      - Are contiguous shapes made exclusively of gray pixels (color 5).
      - These act as 'target' locations.
      - Properties: shape, position (bounding box, top-left corner).
  - transformation:
      - The upper section of the grid (including the blue line) remains unchanged in the output.
      - The lower section of the grid is modified.
      - Each gray 'target' object in the input is removed (pixels set to white/0).
      - For each removed target object, a 'key' object's shape is drawn in the output.
  - replacement_rule:
      - Selection: The specific 'key' object used for replacement is determined by proximity. Calculate the minimum Euclidean distance between any pixel of the target object and any pixel of each key object. The key object with the smallest minimum distance is chosen.
      - Tie-breaking: If multiple key objects have the same minimum distance, the one with the top-most (smallest row index) top-left corner is chosen. If there's still a tie, the one with the left-most (smallest column index) top-left corner among those is chosen.
      - Placement: The chosen key object's shape is drawn using the key object's original color.
      - Anchor: The shape is drawn relative to an anchor point. This anchor point is the top-left corner of the bounding box of the original gray target object.