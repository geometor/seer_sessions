
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 0 0 0
0 0 0 0 0 3 0 0 0 0 0 3 3 0 3 0 0 0 0
0 0 0 3 3 3 3 3 0 0 0 0 3 3 3 0 0 0 0
0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 3 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 3 3 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 1 1 1
0 0 0 0 0 3 0 0 0 0 0 3 3 0 3 0 1 0 1
0 0 0 3 3 3 3 3 0 0 0 0 3 3 3 0 1 1 1
0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0
0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 1 1 1 0 3 3 3 3 0 0 0 0 0
0 0 0 0 0 1 0 0 1 0 3 0 0 3 0 0 0 0 0
0 0 0 0 1 1 0 0 1 0 3 0 0 3 3 0 0 0 0
0 0 0 0 0 1 0 0 1 0 3 0 0 3 0 0 0 0 0
0 0 0 0 0 1 1 1 1 0 3 3 3 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 3 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 3 3 3 3 3 0 1 1 1 1 1 0 0
0 0 0 0 3 0 0 0 3 0 1 0 0 0 1 0 0
0 0 0 3 3 0 0 0 3 0 1 0 0 0 1 1 0
0 0 0 0 3 0 0 0 3 0 1 0 0 0 1 0 0
0 0 0 0 3 3 3 3 3 0 1 1 1 1 1 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 8 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 0 0 0
0 0 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 3 3 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 0 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 0 3 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 3 3 0 0 0 0
0 0 3 3 3 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 0 3 0 1 0 1 0 0 0 0 0 8 8 8 0 0 0 0
0 3 3 0 3 0 1 0 1 1 0 0 0 0 8 0 8 0 0 0 0
0 0 3 0 3 0 1 0 1 0 0 0 0 0 8 0 8 0 0 0 0
0 0 3 3 3 0 1 1 1 0 0 0 0 0 8 8 8 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 8 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 0 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 0 0 0 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 8 8 8 8 8 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 0 0 0 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 3 3 3 3 3 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 3 0 0 0 0 0 0 0 0 0 0
```

Okay, let's break down this task.

**Perception of Task Elements:**

1.  **Input Grid:** Contains a white (0) background and one or more distinct objects composed of green (3) pixels. These green objects often resemble letters or abstract shapes.
2.  **Output Grid:** Contains the original green objects unchanged. Additionally, new objects colored blue (1) or azure (8) appear. These new objects are reflections of the original green objects, placed adjacent (either below or to the right) to the corresponding green object.
3.  **Objects:** The primary objects are the connected components of green pixels. Each green object seems to trigger the creation of exactly one new object (either blue or azure).
4.  **Transformation:** The core transformation involves analyzing properties of each green object (symmetry, aspect ratio) to determine:
    *   Whether to reflect it vertically or horizontally.
    *   What color the reflection should be (blue or azure).
    *   Where to place the reflection (below or to the right).
5.  **Rules:**
    *   **Vertical Symmetry:** If a green object is symmetric about its vertical axis, it is reflected horizontally, colored blue (1), and placed immediately to the right of its bounding box.
    *   **Horizontal Symmetry:** If a green object is *not* vertically symmetric but *is* symmetric about its horizontal axis, it is reflected vertically, colored azure (8), and placed immediately below its bounding box.
    *   **No Symmetry:** If a green object is symmetric neither vertically nor horizontally, its bounding box aspect ratio determines the transformation:
        *   If height > width, it's treated like a horizontally symmetric object (reflect vertically, color azure, place below).
        *   If width >= height, it's treated like a vertically symmetric object (reflect horizontally, color blue, place right).
6.  **Placement:** The reflected object is placed adjacent to the original object's bounding box. The top-left corner of the reflected shape aligns with the row below the original (for vertical reflections) or the column to the right of the original (for horizontal reflections).
7.  **Grid Size:** The output grid preserves the original dimensions but expands downwards or rightwards if necessary to accommodate the new reflected shapes.

**YAML Facts:**


```yaml
task_context:
  description: Reflect green objects based on symmetry or aspect ratio, placing the reflection adjacent to the original.
  grid_properties:
    - background_color: white (0)
    - objects_exist: true
    - grid_size_dynamic: can expand based on output placement

objects:
  - object_type: primary
    color: green (3)
    description: Input shapes, possibly letters or abstract forms. Remain unchanged in the output.
    properties:
      - connectivity: connected components of green pixels
      - symmetry: vertical or horizontal symmetry is checked
      - aspect_ratio: bounding box height vs. width is checked if no symmetry exists
  - object_type: derived
    color: blue (1)
    description: Horizontally reflected copy of a green object.
    source_object_color: green (3)
    derivation_rule: created if source is vertically symmetric OR not symmetric and width >= height.
    placement: placed immediately to the right of the source object's bounding box.
  - object_type: derived
    color: azure (8)
    description: Vertically reflected copy of a green object.
    source_object_color: green (3)
    derivation_rule: created if source is horizontally symmetric (and not vertically symmetric) OR not symmetric and height > width.
    placement: placed immediately below the source object's bounding box.

actions:
  - action: identify_objects
    input: input_grid
    output: list of green (3) connected components (objects)
    description: Find all distinct green shapes.
  - action: analyze_object
    input: green_object
    output: symmetry_type (vertical, horizontal, none), aspect_ratio (h, w)
    description: Determine symmetry and bounding box dimensions for a green object.
  - action: reflect_and_color
    input: green_object, analysis_results (symmetry, aspect_ratio)
    output: new_object (color, shape, relative_position)
    description: Based on analysis, determine reflection type (H/V), color (blue/azure), and relative placement (right/below).
  - action: place_object
    input: original_grid, new_object, source_object_bbox
    output: modified_grid
    description: Add the newly created reflected object to the grid at the calculated position, expanding the grid if necessary.

relationships:
  - type: derivation
    from: green_object
    to: blue_object or azure_object
    rule: Based on symmetry/aspect ratio analysis results. Each green object produces one derived object.
  - type: spatial
    object1: green_object
    object2: derived_blue_object
    relation: object2 is placed immediately to the right (adjacent bounding boxes) of object1.
  - type: spatial
    object1: green_object
    object2: derived_azure_object
    relation: object2 is placed immediately below (adjacent bounding boxes) of object1.

order_of_operations:
  - Find all green objects.
  - For each green object:
    - Check for vertical symmetry. If true, generate blue object to the right.
    - Else, check for horizontal symmetry. If true, generate azure object below.
    - Else, check aspect ratio (h > w). If true, generate azure object below.
    - Else (w >= h), generate blue object to the right.
  - Combine original grid and all generated objects into the final output grid.
```


**Natural Language Program:**

1.  Initialize the output grid as a copy of the input grid. Potentially expand its dimensions later if needed.
2.  Identify all distinct connected components (objects) consisting of green (3) pixels in the input grid.
3.  For each green object found:
    a.  Determine its bounding box (minimum row, maximum row, minimum column, maximum column).
    b.  Extract the shape of the object relative to its bounding box top-left corner.
    c.  Check if the extracted shape is perfectly symmetric when reflected across its vertical midline.
        i.  If it is vertically symmetric: Create a new shape by reflecting the extracted shape horizontally (left-to-right). Color this new shape blue (1). Calculate the placement position: top row = bounding box top row, left column = bounding box right column + 1. Add this blue shape to the output grid at the calculated position.
    d.  Else (if not vertically symmetric), check if the extracted shape is perfectly symmetric when reflected across its horizontal midline.
        i.  If it is horizontally symmetric: Create a new shape by reflecting the extracted shape vertically (top-to-bottom). Color this new shape azure (8). Calculate the placement position: top row = bounding box bottom row + 1, left column = bounding box left column. Add this azure shape to the output grid at the calculated position.
    e.  Else (if it is symmetric neither vertically nor horizontally):
        i.  Calculate the height (h) and width (w) of the bounding box (`h = max_row - min_row + 1`, `w = max_col - min_col + 1`).
        ii. If height (h) is greater than width (w): Create a new shape by reflecting the extracted shape vertically. Color this new shape azure (8). Calculate the placement position: top row = bounding box bottom row + 1, left column = bounding box left column. Add this azure shape to the output grid.
        iii. Else (if width (w) is greater than or equal to height (h)): Create a new shape by reflecting the extracted shape horizontally. Color this new shape blue (1). Calculate the placement position: top row = bounding box top row, left column = bounding box right column + 1. Add this blue shape to the output grid.
4.  Ensure the output grid is large enough to contain all original pixels and all newly added pixels. If shapes were added beyond the original bounds, expand the grid accordingly, filling new areas with the background color (white, 0).
5.  Return the final output grid.
