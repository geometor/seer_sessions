
## train_1

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 4 3 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 2 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 2 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 2 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 4 4 4 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 4 3 4 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 4 4 4 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 3 3 3 3 3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 4 4 4 4 4 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 4 2 4 4 4 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 4 4 4 4 4 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 4 4 4 4 2 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 2 4 4 4 4 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 4 4 4 4 4 4 4 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_2

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 4 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 2 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 4 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 4 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 4 4 2 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 4 4 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 1 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 1 4 4 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 1 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 4 4 4 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 2 4 4 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 4 4 4 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 4 4 4 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 4 4 2 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 4 4 4 4 4 4 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 4 4 4 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 4 4 1 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 4 4 4 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 1 4 4 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 4 4 1 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 4 4 4 4 4 4 4 4 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


## train_3

**input:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 1 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 4 4 4 4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 8 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 8 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 8 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 8 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 4 4 4 4 4 4 4 4 4 4 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```


**output:**
```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 4 4 4 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 4 1 4 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 4 4 4 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 4 4 4 4 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 8 4 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 8 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 8 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 8 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 4 4 4 4 4 4 4 4 4 4 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 8 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
```

Okay, let's break down this task.

## Perception

1.  **Input Structure**: The input grids contain one or more solid rectangular objects composed of yellow (4) pixels. The background is white (0).
2.  **Internal Pixels**: Within these yellow rectangles, there can be scattered pixels of a single other color (non-yellow, non-white). Let's call this the "inner color".
3.  **Output Structure**: The output grids retain the original yellow rectangles, but the internal colored pixels are changed to yellow. Additionally, a solid border is drawn around each original yellow rectangle.
4.  **Border Properties**:
    *   The color of the border matches the "inner color" of the pixels originally inside the corresponding yellow rectangle.
    *   The thickness of the border (how many pixels it extends outwards from the original rectangle) appears directly related to the *number* of internal pixels of that inner color. In almost all cases (5 out of 6 examples across the training pairs), the thickness is equal to the count of the internal pixels.
5.  **Anomaly**: In `train_1`, the second object (a 6x8 yellow rectangle with 3 red inner pixels) results in a border only 2 pixels thick, not 3. All other examples follow the "thickness = count" rule. Given the strong consistency otherwise, I will proceed assuming the general rule is `thickness = count`, while noting this one exception.
6.  **Object Independence**: Each yellow rectangle and its transformation appear independent of the others within the same grid.

## Facts


```yaml
task_elements:
  - element: background
    color: white (0)
    scope: entire_grid
  - element: primary_object
    shape: rectangle
    color: yellow (4)
    properties:
      - bounding_box: defines extent
      - contains: internal_pixels
  - element: internal_pixels
    location: strictly inside the bounding_box of a primary_object
    color: non-white (0), non-yellow (4)
    constraint: all internal_pixels within a single primary_object must share the same color (inner_color)
    properties:
      - count: N
      - color: inner_color
  - element: output_object
    derivation: transformation of a primary_object
    components:
      - core:
          shape: same as primary_object rectangle
          color: yellow (4) (original internal_pixels are changed to yellow)
      - border:
          location: surrounding the core
          shape: rectangular frame
          color: inner_color (from the corresponding primary_object)
          thickness: T (number of pixels extending outwards)
          relationship: T = N (count of internal_pixels) # Acknowledging the single anomaly in train_1.

actions:
  - action: identify_objects
    target: primary_object (yellow rectangles)
    sub_actions:
      - find_bounding_box
      - find_internal_pixels
      - verify_single_inner_color
      - count_internal_pixels (N)
      - determine_inner_color
  - action: transform_object
    input: primary_object, N, inner_color
    output: output_object
    steps:
      - create_core: copy primary_object shape, fill with yellow (4)
      - determine_border_thickness: T = N
      - draw_border: create frame of thickness T around the core using inner_color

grid_properties:
  - size: variable (up to 30x30)
  - colors: standard ARC color map
```


## Natural Language Program

1.  Create a copy of the input grid to serve as the initial output grid.
2.  Find all distinct, contiguous rectangular blocks of yellow (4) pixels in the input grid.
3.  For each yellow rectangle found:
    a.  Determine its bounding box coordinates (minimum row, minimum column, maximum row, maximum column).
    b.  Search within the area strictly inside this bounding box for any pixels that are not yellow (4) and not white (0).
    c.  Collect all such internal pixels. If none are found, proceed to the next yellow rectangle.
    d.  Check if all collected internal pixels have the exact same color. If they have different colors, proceed to the next yellow rectangle.
    e.  If all internal pixels share the same color (let this be `inner_color`) and there are `N` such pixels:
        i.  Calculate the border thickness `T = N`.
        ii. Define the original bounding box (`min_r`, `min_c`, `max_r`, `max_c`).
        iii. Define the expanded bounding box: `exp_min_r = min_r - T`, `exp_min_c = min_c - T`, `exp_max_r = max_r + T`, `exp_max_c = max_c + T`. (Clamp these values to stay within the grid boundaries if necessary).
        iv. Iterate through all grid cells (r, c) within the expanded bounding box (from `exp_min_r` to `exp_max_r`, `exp_min_c` to `exp_max_c`). If the cell (r, c) is *outside* the original bounding box (i.e., `r < min_r` or `r > max_r` or `c < min_c` or `c > max_c`), set the color of the cell (r, c) in the output grid to `inner_color`.
        v.  Iterate through all grid cells (r, c) within the original bounding box (from `min_r` to `max_r`, `min_c` to `max_c`). If the cell (r, c) in the *input* grid had the `inner_color`, set the corresponding cell (r, c) in the *output* grid to yellow (4). (Cells that were originally yellow remain yellow).
4.  Return the final modified output grid.
