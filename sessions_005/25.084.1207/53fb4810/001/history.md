
## train_1

**input:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 1 8 8 8 8 8 8 8 8 8
8 8 8 1 1 1 2 3 2 3 2 3 2 3
8 8 8 8 1 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 1 8 8 8
8 8 8 8 8 8 8 8 8 1 1 1 8 8
8 8 8 8 8 8 8 8 8 8 1 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
```


**output:**
```
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 1 8 8 8 8 8 2 8 8 8
8 8 8 1 1 1 2 3 2 3 4 3 2 3
8 8 8 8 1 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 4 8 8 8
8 8 8 8 8 8 8 8 8 8 2 8 8 8
8 8 8 8 8 8 8 8 8 8 1 8 8 8
8 8 8 8 8 8 8 8 8 1 1 1 8 8
8 8 8 8 8 8 8 8 8 8 1 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 8 8 8 8 8 8 8 8 8 8 8 8
```


## train_2

**input:**
```
8 8 8 8 8 8 8 8 8 8 8 8 8
8 8 1 1 8 8 8 8 8 8 8 8 8
8 1 1 1 1 8 8 8 8 8 8 8 8
8 1 1 1 1 8 8 8 8 8 8 8 8
8 1 1 1 1 8 8 8 8 8 8 8 8
8 8 1 1 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 1 1 8 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 8 1 1 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
```


**output:**
```
8 8 8 8 8 8 8 8 4 2 8 8 8
8 8 1 1 8 8 8 8 4 2 8 8 8
8 1 1 1 1 8 8 8 4 2 8 8 8
8 1 1 1 1 8 8 8 4 2 8 8 8
8 1 1 1 1 8 8 8 4 2 8 8 8
8 8 1 1 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 4 2 8 8 8
8 8 2 3 8 8 8 8 1 1 8 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 1 1 1 1 8 8
8 8 2 3 8 8 8 8 1 1 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
8 8 2 3 8 8 8 8 8 8 8 8 8
```

*   **Perception**:
    *   Both input grids contain a background color (azure, 8).
    *   Both inputs have multiple distinct objects or patterns made of non-background colors.
    *   Notably, both inputs feature one or more blue (1) objects and several isolated single pixels of various colors (red, yellow, blue).
    *   In the outputs, the grid dimensions and background color remain the same.
    *   A specific blue object (the lowest one in the grid) seems to act as a reference or 'marker' and remains unchanged. Other blue objects also remain unchanged.
    *   Some, but not all, of the isolated single pixels disappear in the output (replaced by the background color). Specifically, the non-blue isolated pixels disappear.
    *   A new vertical repeating pattern appears in the output grid. This pattern's colors are derived from the colors of the isolated pixels that disappeared.
    *   The location (column(s)) and vertical extent (rows) of the new pattern seem related to the marker object and the locations of the disappeared isolated pixels.
    *   The pattern overwrites any existing pixels in its path.

*   **Facts**:
    
```yaml
    task_context: Identify specific isolated pixels based on their color relative to a marker object, use their colors to generate a vertical pattern in columns related to the marker's position, and remove the originating pixels.
    grid_properties:
      - dimensions: Input and output grids have the same dimensions.
      - background_color: Azure (8) is the background in both examples.
    objects:
      - type: marker
        description: The lowest blue (1) object in the grid.
        properties:
          - color: Blue (1)
          - position: Lowest vertical position among blue objects.
        persistence: Unchanged in the output.
      - type: isolated_pixels
        description: Single pixels surrounded entirely by the background color.
        properties:
          - color: Varies (e.g., Red(2), Yellow(4), Blue(1)).
          - count: Multiple can exist.
        persistence: Pixels whose color differs from the marker are removed (set to background). Blue isolated pixels persist if not overwritten.
      - type: generated_pattern
        description: A new vertical pattern appearing in the output.
        properties:
          - orientation: Vertical
          - structure: Repeating sequence of colors.
          - colors: Derived from non-blue isolated pixels.
          - location_columns: Columns containing non-blue isolated pixels adjacent to the marker.
          - location_rows: Extends from row 0 down to the highest row containing an adjacent non-blue isolated pixel.
        persistence: Newly created in the output, overwrites existing content.
      - type: other_shapes
        description: Other non-background shapes or patterns in the input.
        persistence: Unchanged unless overwritten by the generated_pattern.
    relationships:
      - The 'marker' object's color (blue=1) determines which isolated pixels are 'active' (non-blue ones).
      - The 'marker' object's position determines which 'active' isolated pixels influence the output (those adjacent to the marker).
      - The columns of the adjacent 'active' isolated pixels determine the columns of the generated_pattern.
      - The colors of all 'active' isolated pixels, ordered by their position (bottom-up, left-right), determine the color sequence of the generated_pattern.
      - The row of the highest adjacent 'active' isolated pixel determines the bottom extent of the generated_pattern (which extends upwards to row 0).
    actions:
      - Identify: Marker object, isolated pixels.
      - Filter: Select isolated pixels with color != marker color ('active' pixels).
      - Select: Choose 'active' pixels adjacent to the marker to determine pattern columns and row extent.
      - Order: Sort unique colors from all 'active' pixels based on position to create the pattern sequence.
      - Generate: Create the vertical repeating pattern in the selected columns/rows.
      - Remove: Set all 'active' isolated pixels to the background color.
    ```


*   **Natural Language Program**:
    1.  Identify the background color (typically the most frequent color, e.g., azure 8).
    2.  Find all distinct blue (color 1) objects. Identify the 'marker' object as the blue object positioned lowest in the grid (based on its highest row index).
    3.  Find all 'isolated' pixels: single pixels of any non-background color whose 8 neighboring cells are all the background color.
    4.  Create a set named `active_pixels` containing only those isolated pixels whose color is *not* blue (color 1).
    5.  If `active_pixels` is empty, return the input grid unchanged.
    6.  Create a subset named `adjacent_active_pixels` containing pixels from `active_pixels` that are adjacent (including diagonals) to any part of the marker object.
    7.  Determine the set of columns `pattern_columns` where the pattern will be drawn: These are the unique column indices of the pixels in `adjacent_active_pixels`.
    8.  Determine the repeating color sequence `pattern_colors`:
        a.  Collect the unique colors from *all* pixels in `active_pixels`.
        b.  Order these colors based on the position (scan bottom-to-top, then left-to-right) of the first occurrence of each color within the `active_pixels` set.
    9.  Determine the bottom row for the pattern `pattern_bottom_row`: This is the highest row index (minimum value) among all pixels in `adjacent_active_pixels`.
    10. Create the output grid by copying the input grid.
    11. Draw the pattern: For each column index `c` in `pattern_columns`, iterate from row `r = 0` down to `pattern_bottom_row`. Set the color of the pixel at `(r, c)` in the output grid using the `pattern_colors` sequence, repeating as necessary.
    12. Clean up: In the output grid, change the color of all pixels corresponding to the original locations of the pixels in `active_pixels` to the background color.
    13. Return the modified output grid.
