Data:
  - Input: Grid (Matrix of integers)
  - Output: Grid (Matrix of integers)

Elements:
  - Type: Number / Color
    Values:
      - 0: Background/Empty
      - 1: Separator (Row or Column)
      - 2, 3, 4, 6, 8, 9: Foreground Colors/Objects
  - Type: Region
    Description: Sub-grid area defined by separators (1s) or contiguous blocks of a single color.
  - Type: PatternMask
    Description: A binary grid derived from the spatial arrangement of a specific Pattern Color (PC) within its region. Represents the shape template.
    Properties:
      - Height: Ph
      - Width: Pw
  - Type: Motif
    Description: A small grid generated by filling the PatternMask shape with the two primary output colors (C1, C2).
    Properties:
      - Height: Ph
      - Width: Pw
      - Colors: C1, C2

Properties:
  - Frequency: Count of occurrences of each color (excluding 0, 1).
  - BoundingBox: Minimal rectangle enclosing non-zero elements of a specific color within a region.
  - Area: Size of the BoundingBox.

Relationships & Actions:
  - Separation: The input grid is parsed into Regions based on Separator (1) lines.
  - Color Selection (Output Colors):
    - Identify all colors C != 0, 1.
    - Calculate frequency of each C.
    - Select C1 = most frequent color.
    - Select C2 = second most frequent color.
  - Color Selection (Pattern Color):
    - Identify remaining colors R = {C | C != 0, 1, C1, C2}.
    - Select PC from R based on a criterion (e.g., least frequent, or color whose non-zero elements form the smallest bounding box area).
  - Pattern Extraction:
    - Locate the Region containing PC.
    - Find the minimal BoundingBox around non-zero PC values in that region.
    - Create PatternMask (binary) based on the relative positions of PC values within the BoundingBox.
  - Motif Generation:
    - Create a Motif grid with the same dimensions as PatternMask.
    - Fill Motif cells with C1 where PatternMask is 1.
    - Fill Motif cells with C2 where PatternMask is 0.
  - Output Construction:
    - Determine output dimensions (Ho, Wo). Ho often equals PatternMask height (Ph). Wo seems derived from PatternMask width (Pw) and potentially the Pattern Color (PC) or other properties, possibly involving tiling or repetition.
    - Fill the output grid by using the Motif as a repeating tile (primarily horizontally), potentially cropping the last tile to match Wo.

Examples:
  - train_3: C1=6, C2=4. PC=3. PatternMask (4x5) from color 3. Motif generated. Output size 4x15. Output is Motif tiled horizontally 3 times (N=3, which equals PC).
  - Other examples suggest a more complex relationship between Motif and Output size/tiling.